<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ã‚„ã£ãŸã“ã¨</title>
  
  <subtitle>ã‚„ã£ãŸã“ã¨ã€ã—ã‚‰ã¹ãŸã“ã¨</subtitle>
  <link href="/blog/atom.xml" rel="self"/>
  
  <link href="https://ytetsuro.github.io/blog/"/>
  <updated>2018-06-06T18:17:40.000Z</updated>
  <id>https://ytetsuro.github.io/blog/</id>
  
  <author>
    <name>ytetsuro</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>TypeScriptã®Factoryã‚¯ãƒ©ã‚¹ã§DRYã™ã‚‹</title>
    <link href="https://ytetsuro.github.io/blog/2018/06/07/TypeScript%E3%81%AEFactory%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%A7DRY%E3%81%99%E3%82%8B/"/>
    <id>https://ytetsuro.github.io/blog/2018/06/07/TypeScriptã®Factoryã‚¯ãƒ©ã‚¹ã§DRYã™ã‚‹/</id>
    <published>2018-06-06T16:25:52.000Z</published>
    <updated>2018-06-06T18:17:40.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å•é¡Œ"><a href="#å•é¡Œ" class="headerlink" title="å•é¡Œ"></a>å•é¡Œ</h2><p>ç§ã¯ã€æ¥­å‹™ã§ã¯ä¸»ã«PHPã¨Javascriptã‚’æ›¸ãã€ã”ãç¨€ã«Javaã‚„Swiftã‚’ãŸã¾ã«è§¦ã‚Šã¾ã™ã€‚<br>ã¾ãŸã€è¶£å‘³ã§æœ€è¿‘TypeScriptã‚’è§¦ã£ã¦ã„ã¾ã™ã€‚</p><p>PHPã§ã“ã‚“ãªæ„Ÿã˜ã§Factoryãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ›¸ãã¨ã€DRYã§å¥½ãã§ã™ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Factory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $class_map;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;class_map = <span class="keyword">new</span> SplObjectStorage();</span><br><span class="line">    <span class="keyword">$this</span>-&gt;class_map[MammalianType::Dog()] = Dog::class;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;class_map[MammalianType::Cat()] = Cat::class;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;class_map[MammalianType::Capibara()] = Capibara::class;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">create</span><span class="params">(MammalianType $mamalian_type, PetSource $source)</span>: <span class="title">Mammalian</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    assert(<span class="keyword">isset</span>(<span class="keyword">$this</span>-&gt;class_map[$mamalian_type]));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">$this</span>-&gt;class_map[$mamalian_type]([</span><br><span class="line">       <span class="string">'name'</span> =&gt; $source-&gt;name, <span class="comment">// constructorã«æ¸¡ã™ã‚‚ã®ã¯å…¨ã¦ä¸€ç·’ã§å¼•æ•°ã‹ã‚‰ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ãƒˆã—ãŸã‚‚ã®ã‚’å…¥ã‚Œã‚‹ã€‚</span></span><br><span class="line">       <span class="string">'blood_type'</span> =&gt; $source-&gt;blood_type,</span><br><span class="line">    ]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã—ã‹ã—ã€Javaãƒ»Swiftãªã©ã®é™çš„å‹ä»˜è¨€èªã‚’è§¦ã‚‹æ™‚ã«åŒã˜ã‚ˆã†ãªå®Ÿè£…ã‚’ã™ã‚‹ã«ã¯ã€ã©ã†ã—ãŸã‚‰è‰¯ã„ã‚‚ã®ã‹ã¨é ­ã‚’æŠ±ãˆã¦ã—ã¾ã„ã¾ã™ã€‚<br>PHPã§ã‚‚$class_mapãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ä»£å…¥ã•ã‚Œã¦ã„ã‚‹SplObjectStorageã®valueã¯å³å¯†ã«ã¯stringãªã®ã§ã™ã€‚</p><h3 id="Javaã§ã®å®Ÿè£…"><a href="#Javaã§ã®å®Ÿè£…" class="headerlink" title="Javaã§ã®å®Ÿè£…"></a>Javaã§ã®å®Ÿè£…</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Factory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="comment">// Any!?</span></span><br><span class="line">  <span class="keyword">private</span> Map&lt;MammalianType, Any&gt; classMap;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Factory</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="comment">// Any!?</span></span><br><span class="line">    <span class="keyword">this</span>.classMap = <span class="keyword">new</span> HashMap&lt;MammalianType, Any&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ã©ã†æ›¸ã‘ã°è‰¯ã„ã‹ä¸æ˜</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Mammalian <span class="title">create</span><span class="params">(MammalianType mamalianType, PetSource source)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="comment">// Any!?</span></span><br><span class="line">    Any constructor = <span class="keyword">this</span>.classMap.get(mamalianType);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> constructor(source.name, source.bloodType);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã‚‚ã¡ã‚ã‚“HashMapã®valueã‚’Stringã«ã—ã¦Refrectionã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ãŠãã‚‰ãã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã¯ã§ãã¾ã™ã€‚<br>ã—ã‹ã—ã€ãã‚“ãªã“ã¨ã®ãŸã‚ã«Refrectionã‚’åˆ©ç”¨ã™ã‚‹ã®ã‚‚ç­‹ãŒæ‚ªãã†ã§ã™ã—ã€ä½•ã‚ˆã‚Šç§ã¯ãã‚Œã‚’ç¾ã—ã„ã¨æ„Ÿã˜ã¾ã›ã‚“ã€‚</p><p>ãã‚Œã§ã¯ã“ã‚“ãªã‚³ãƒ¼ãƒ‰ã¯ã©ã†ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Factory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> Mammalian <span class="title">create</span><span class="params">(MammalianType mamalianType, PetSource source)</span> <span class="keyword">throws</span> Error</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    Mammalian result;</span><br><span class="line">    <span class="keyword">switch</span> (mamalianType)</span><br><span class="line">    &#123;</span><br><span class="line">       <span class="keyword">case</span> Dog:</span><br><span class="line">         result = <span class="keyword">this</span>.createDog(source);</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">       <span class="keyword">case</span> Cat:</span><br><span class="line">         result = <span class="keyword">this</span>.createCat(source);</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">       <span class="keyword">case</span> Capibara:</span><br><span class="line">         result = <span class="keyword">this</span>.createCapibara(source);</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">       <span class="keyword">default</span>:</span><br><span class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'æœªå®šç¾©'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> Dog <span class="title">createDog</span><span class="params">(PetSource source)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Dog(source.name, source.bloodType);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> Cat <span class="title">createCat</span><span class="params">(PetSource source)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Cat(source.name, source.bloodType);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> Dog <span class="title">createCapibara</span><span class="params">(PetSource source)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Capibara(source.name, source.bloodType);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãã‚Œãã‚Œã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ã¾ã—ãŸã€‚<br>ç§ã¯ã€ã“ã‚Œã§ã¯ä»¥ä¸‹ã®ã“ã¨ã‚’ä¸å®‰ã«æ„Ÿã˜ã¦ã—ã¾ã†ã®ã§ã™ã€‚</p><ul><li>createXXXãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸­èº«ãŒDRYã«ã§ããªã„ã®ã‹ã€‚</li><li>Mammalianã‚¯ãƒ©ã‚¹ã®å­ã‚¯ãƒ©ã‚¹ãŒå¢—ãˆãŸå ´åˆã«ãƒ¡ã‚½ãƒƒãƒ‰ã¨switchæ–‡ä¸¡æ–¹ã‚’è¿½åŠ ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã®ã‹ã€‚</li></ul><p>ã“ã®ä¸å®‰ã¯ç§ãŒé™çš„å‹ä»˜è¨€èªã«æ…£ã‚Œã¦ã„ãªã„ã®ã§ç™ºç”Ÿã™ã‚‹ä¸å®‰ãªã®ã‹ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚</p><p>ã“ã®ç‚¹ã§ã€TypeScriptã§ã¯é€”ä¸­ã¾ã§ã†ã¾ãã„ãã¾ã—ãŸã€‚</p><h3 id="TypeScriptã§ã®å®Ÿè£…"><a href="#TypeScriptã§ã®å®Ÿè£…" class="headerlink" title="TypeScriptã§ã®å®Ÿè£…"></a>TypeScriptã§ã®å®Ÿè£…</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> Factory</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> classMap: Map&lt;MammalianType, <span class="keyword">typeof</span> Mammalian&gt;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"></span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">this</span>.classMap = <span class="keyword">new</span> Map&lt;MammalianType, <span class="keyword">typeof</span> Mammalian&gt;();</span><br><span class="line">    <span class="keyword">this</span>.classMap.set(MammalianType.Dog, Dog);</span><br><span class="line">    <span class="keyword">this</span>.classMap.set(MammalianType.Cat, Cat);</span><br><span class="line">    <span class="keyword">this</span>.classMap.set(MammalianType.Capibara, Capibara);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> create(mamalianType: MammalianType, source: PetSource): Mammalian </span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.classMap.has(mammalianType)) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'å®šç¾©ã•ã‚Œã¦ã„ãªã„å“ºä¹³é¡ç¨®åˆ¥ã§ã™ã€‚'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> mammalianConstructor: <span class="keyword">typeof</span> Mammalian = <span class="keyword">this</span>.classMap.get(mamalianType);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> mammalianConstructor(&#123;name: source.name, bloodType: source.bloodType&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã®ã‚³ãƒ¼ãƒ‰ã«ã¯é‡å¤§ãªå•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚<br>Mammalianã‚’abstractã‚¯ãƒ©ã‚¹ã«ã§ããªã„ã®ã§ã™ã€‚</p><p>ã“ã“ã¾ã§ã®ç§ã®è¦æ±‚ã¯</p><ol><li>Factoryã‚¯ãƒ©ã‚¹ã‚’DRYã«å®Ÿè£…ã—ãŸã„ã€‚</li><li>Mammalianã‚¯ãƒ©ã‚¹ã‚’æŠ½è±¡ã‚¯ãƒ©ã‚¹ã«ã—ãŸã„ã€‚</li></ol><p>ã“ã®äºŒã¤ã§ã™ãŒã€é™çš„å‹ä»˜è¨€èªã§ã¯ã“ã‚Œã‚‰ã®è¦æ±‚ã«æ²¿ã†å®Ÿè£…ã‚’è¡Œã†ã“ã¨ãŒé›£ã—ãæ„Ÿã˜ã¾ã—ãŸã€‚</p><p>ã—ã‹ã—ã€TypeScriptã¯ã“ã®ã‚ˆã†ãªè¦æ±‚ã«å¿œãˆã‚‹ã“ã¨ã®ã§ãã‚‹è¨€èªã§ã—ãŸã€‚</p><h2 id="è§£æ±º"><a href="#è§£æ±º" class="headerlink" title="è§£æ±º"></a>è§£æ±º</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> MammalianConstructor &#123;</span><br><span class="line">  <span class="keyword">new</span> (source: PetSource) : Mammalian;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> Factory</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> classMap: Map&lt;MammalianType, MammalianConstructor&gt;; <span class="comment">// ã“ã“ã®å‹ãŒå¤‰ã‚ã£ãŸã€‚</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"></span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">this</span>.classMap = <span class="keyword">new</span> Map&lt;MammalianType, MammalianConstructor&gt;();</span><br><span class="line">    <span class="keyword">this</span>.classMap.set(MammalianType.Dog, Dog);</span><br><span class="line">    <span class="keyword">this</span>.classMap.set(MammalianType.Cat, Cat);</span><br><span class="line">    <span class="keyword">this</span>.classMap.set(MammalianType.Capibara, Capibara);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> create(mamalianType: MammalianType, source: PetSource): Mammalian </span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.classMap.has(mammalianType)) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'å®šç¾©ã•ã‚Œã¦ã„ãªã„å“ºä¹³é¡ç¨®åˆ¥ã§ã™ã€‚'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> mammalianConstructor: MammalianConstructor = <span class="keyword">this</span>.classMap.get(mamalianType);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> mammalianConstructor(source);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãªã‚“ã¨ã„ã†ã“ã¨ã§ã—ã‚‡ã†ã€‚</p><p>TypeScriptã§ã¯ã€interfaceã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã™ã‚‹ã¨ãã®è¿”ã‚Šå€¤ã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€<br>intefaceã¸ä¾å­˜ã™ã‚‹ã“ã¨ã§ã€ç§ã®è¦æ±‚ã‚’å…¨ã¦å¶ãˆã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</p><p>ç§ã¯ã€ã“ã®ç™ºè¦‹ã‚’ã—ãŸã¨ãã™ã”ãå¬‰ã—ã‹ã£ãŸã§ã™ã€‚<br>åŒã˜ã‚ˆã†ãªã“ã¨ã§å›°ã£ã¦ã„ã‚‹äººãŒã„ãŸã‚‰ã€ã“ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p><h2 id="ä½™è«‡"><a href="#ä½™è«‡" class="headerlink" title="ä½™è«‡"></a>ä½™è«‡</h2><h3 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h3><p>æœ¬æ—¥å‚åŠ ã—ãŸã€<a href="https://nfug.connpass.com" target="_blank" rel="noopener">Nagoya Frontend User Group</a>ã®ã‚‚ãã‚‚ãä¼šã§ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚Œã°ã€Enumã¨æ´¾ç”Ÿã‚¯ãƒ©ã‚¹ã®ç¶²ç¾…æ€§ã‚’ä¿è¨¼ã§ãã‚‹ã¨æ•™ãˆã¦ã„ãŸã ãã¾ã—ãŸã€‚<br>ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ğŸ¤—</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> MammalianConstructor &#123;</span><br><span class="line">  <span class="keyword">new</span> (source: PetSource) : Mammalian;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> Factory</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> toMammalianConstructor() : MammalianConstructor</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">switch</span> (<span class="keyword">type</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> MarkerType.First: <span class="keyword">return</span> FirstMarker;</span><br><span class="line">      <span class="keyword">case</span> MarkerType.Second: <span class="keyword">return</span> SecondMarker;</span><br><span class="line">      <span class="keyword">case</span> MarkerType.DeliveryService: <span class="keyword">return</span> DeliveryServiceMarker;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// neverå‹ã®å¤‰æ•°ã«ä»£å…¥ã—ã¦EnumãŒã™ã¹ã¦ç¶²ç¾…ã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã€‚ç¶²ç¾…ã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼</span></span><br><span class="line">    <span class="keyword">const</span> unreachableCheck: never = <span class="keyword">type</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> create(mamalianType: MammalianType, source: PetSource): Mammalian </span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">const</span> mammalianConstructor: MammalianConstructor = <span class="keyword">this</span>.classMap.get(mamalianType);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> mammalianConstructor(source);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><p>ã‚ã¨ã€ã“ã®è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚ã«ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚Œã°ã„ã‘ã‚‹ã‚“ã˜ã‚ƒï¼Ÿã¨ã„ã†å†…å®¹ã‚’è¦‹ã¤ã‘ãŸã®ã§ãƒ¡ãƒ¢ã€‚(æœªæ¤œè¨¼)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Factory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> Map&lt;MammalianType, Class&lt;? exnteds Mammalian&gt;&gt; classMap;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Factory</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.classMap = <span class="keyword">new</span> HashMap&lt;MammalianType, Class&lt;? exnteds Mammalian&gt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.classMap.put(MammalianType.Dog, Dog);</span><br><span class="line">    <span class="keyword">this</span>.classMap.put(MammalianType.Cat, Cat);</span><br><span class="line">    <span class="keyword">this</span>.classMap.put(MammalianType.Capibara, Capibara);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Mammalian <span class="title">create</span><span class="params">(MammalianType mamalianType, PetSource source)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    Class&lt;? exnteds Mammalian&gt; constructor = <span class="keyword">this</span>.classMap.get(mamalianType);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> constructor(source.name, source.bloodType);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://stackoverflow.com/questions/39614311/class-constructor-type-in-typescript" target="_blank" rel="noopener">Stack Overflow - Class constructor type in typescript?</a><br><a href="https://stackoverflow.com/questions/39419170/how-do-i-check-that-a-switch-block-is-exhaustive-in-typescript/39419171#39419171" target="_blank" rel="noopener">Stack Overflow - How do I check that a switch block is exhaustive in TypeScript?</a><br><a href="https://nfug.connpass.com" target="_blank" rel="noopener">Nagoya Frontend User Group</a><br><a href="https://waman.hatenablog.com/entry/20101003/1286102501" target="_blank" rel="noopener">ã„ã¾ã•ã‚‰!? Class ã‚¯ãƒ©ã‚¹ (2) ï¼š Class ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å–å¾—æ–¹æ³•</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å•é¡Œ&quot;&gt;&lt;a href=&quot;#å•é¡Œ&quot; class=&quot;headerlink&quot; title=&quot;å•é¡Œ&quot;&gt;&lt;/a&gt;å•é¡Œ&lt;/h2&gt;&lt;p&gt;ç§ã¯ã€æ¥­å‹™ã§ã¯ä¸»ã«PHPã¨Javascriptã‚’æ›¸ãã€ã”ãç¨€ã«Javaã‚„Swiftã‚’ãŸã¾ã«è§¦ã‚Šã¾ã™ã€‚&lt;br&gt;ã¾ãŸã€è¶£å‘³ã§æœ€è¿‘TypeScri
      
    
    </summary>
    
    
      <category term="Factory" scheme="https://ytetsuro.github.io/blog/tags/Factory/"/>
    
      <category term="DRY" scheme="https://ytetsuro.github.io/blog/tags/DRY/"/>
    
      <category term="TypeScript" scheme="https://ytetsuro.github.io/blog/tags/TypeScript/"/>
    
  </entry>
  
  <entry>
    <title>Composite</title>
    <link href="https://ytetsuro.github.io/blog/2018/05/25/Composite/"/>
    <id>https://ytetsuro.github.io/blog/2018/05/25/Composite/</id>
    <published>2018-05-24T18:17:07.000Z</published>
    <updated>2018-06-19T02:07:50.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h2><p>å€‹ã€…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ(è‘‰)ã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é›†åˆ(æ)ã‚’åŒã˜æ§˜ã«æ‰±ã†ã“ã¨ãŒã§ãã‚‹æ§˜ã«ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚</p><p>ã“ã“ã§ã€å®šç¾©ã•ã‚Œã¦ã„ã‚‹<code>åŒã˜æ§˜ã«æ‰±ã†ã“ã¨ãŒã§ãã‚‹</code>ã¨ã„ã†ã®ã¯ã€ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ãŒåŒã˜ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨æ„ã™ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚</p><h2 id="åˆ©ç‚¹"><a href="#åˆ©ç‚¹" class="headerlink" title="åˆ©ç‚¹"></a>åˆ©ç‚¹</h2><ul><li>æœ¨æ§‹é€ ã‚’è¡¨ã™æ™‚ã«ä¾¿åˆ©</li><li>å€‹ã€…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ(è‘‰)ã¨é›†åˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ(æ)ãŒåˆ©ç”¨ã™ã‚‹æŠ½è±¡ã«ä¾å­˜ã™ã‚‹ã“ã¨ã§ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ãŒæã‹è‘‰ã‹ã‚’æ„è­˜ã™ã‚‹ã“ã¨ãªãå®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚</li><li>æã‚„è‘‰ã‚’å¢—ã‚„ã™ã®ãŒå®¹æ˜“</li></ul><h2 id="ä¾‹"><a href="#ä¾‹" class="headerlink" title="ä¾‹"></a>ä¾‹</h2><p>ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®å£²ã‚Šä¸Šã’ç®¡ç†ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¡¨ç¾ã™ã‚‹ã€‚<br>å•†å“ã‚’è¡¨ã™<code>Product</code>ã‚¯ãƒ©ã‚¹ã¨ã€ æ³¨æ–‡ã‚’è¡¨ã™<code>Order</code>ã‚¯ãƒ©ã‚¹ã‚ˆã‚Šæ–™é‡‘ãŒå–å¾—ã§ãã‚‹ã€‚</p><h3 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h3><p><img src="https://www.plantuml.com/plantuml/svg/bP513e8m44NtFSKiM41KJk22nBrw0pAq3MbIYca7D-hT7Lj04jJ4LTlvC_-_JAj0w6dehC0ca4T982s606Tlf3wWbOD5miPgk0c07MGEEyst3TIrx1tF399oFenharX4rJY2sRBL5Ftof8tTN3ro_rYyzaO1AfMlapEvU1NY8SJ4s2jEdyWkhy6VQDk8bHhVc0kwsVhabVRH-1-opuuJvlvUbkkzYXJrHQoqK_mxJm00"></p><p>æ(Order)ã¨è‘‰(Product)ãŒåŒã˜æŠ½è±¡ã‚’ç¶™æ‰¿ã—ã¦ã„ã‚‹ã€‚</p><h3 id="PHPã§æ›¸ã„ã¦ã¿ã‚‹"><a href="#PHPã§æ›¸ã„ã¦ã¿ã‚‹" class="headerlink" title="PHPã§æ›¸ã„ã¦ã¿ã‚‹"></a>PHPã§æ›¸ã„ã¦ã¿ã‚‹</h3><p>PriceCalculatable<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">PriceCalculatable</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $name;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(string $name)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;name = $name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getPrice</span><span class="params">()</span> : <span class="title">int</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span><span class="params">()</span> : <span class="title">string</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(PriceCalculatable $calculatable)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> LogicException(<span class="string">'é›†è¨ˆå¯èƒ½ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Product<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span> <span class="keyword">extends</span> <span class="title">PriceCalculatable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $price;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(string $name, int $price)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">parent</span>::__construct($name);</span><br><span class="line">    <span class="keyword">$this</span>-&gt;price = $price;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getPrice</span><span class="params">()</span> : <span class="title">int</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;price;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Order<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Order</span> <span class="keyword">extends</span> <span class="title">PriceCalculatable</span> <span class="keyword">implements</span> <span class="title">IteratorAggregate</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $price;</span><br><span class="line">  <span class="keyword">private</span> $calculatables = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(string $name)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">parent</span>::__construct($name);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(PriceCalculatable $calculatable)</span> // æŠ½è±¡ã«ä¾å­˜ã•ã›ã‚‹</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;calculatables[] = $calculatables;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getIterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;calculatables $calculatable) &#123;</span><br><span class="line">      <span class="keyword">yield</span> $calculatable;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getPrice</span><span class="params">()</span> : <span class="title">int</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     $total_price = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">foreach</span> (<span class="keyword">$this</span> <span class="keyword">as</span> $calculatable) &#123;</span><br><span class="line">       <span class="comment">// Orderã§ã‚‚Priceã§ã‚‚åŒã˜æ§˜ã«æ‰±ã†ã“ã¨ãŒã§ãã‚‹ã®ã§ã€é‡‘é¡ã‚’å–å¾—ã™ã‚‹ã ã‘ã§è‰¯ã„</span></span><br><span class="line">       $total_price += $calculatable-&gt;getPrice(); </span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">return</span> $total_price;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æã‚’è¡¨ã™Orderã‚¯ãƒ©ã‚¹ã¨è‘‰ã‚’è¡¨ã™Productã‚¯ãƒ©ã‚¹ã§åŒã˜APIã‚’æä¾›ã™ã‚‹ã€‚</p><p>Client<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$tamade_order = <span class="keyword">new</span> Order(<span class="string">'5/21 ã‚¹ãƒ¼ãƒ‘ãƒ¼ç‰å‡º'</span>);</span><br><span class="line">$seven_order = <span class="keyword">new</span> Order(<span class="string">'5/21 ã‚»ãƒ–ãƒ³ã‚¤ãƒ¬ãƒ–ãƒ³'</span>);</span><br><span class="line"></span><br><span class="line">$tamade_order-&gt;add(<span class="keyword">new</span> Product(<span class="string">'ç‰›è‚‰'</span>, <span class="number">1135</span>));</span><br><span class="line">$tamade_order-&gt;add(<span class="keyword">new</span> Product(<span class="string">'è±šè‚‰'</span>, <span class="number">350</span>));</span><br><span class="line">$tamade_order-&gt;add(<span class="keyword">new</span> Product(<span class="string">'ã‚­ãƒ£ãƒ™ãƒ„'</span>, <span class="number">200</span>));</span><br><span class="line"></span><br><span class="line">$seven_order-&gt;add(<span class="keyword">new</span> Product(<span class="string">'ã‚·ãƒ¼ãƒã‚­ãƒ³ãŠã«ãã‚Š'</span>, <span class="number">100</span>));</span><br><span class="line">$seven_order-&gt;add(<span class="keyword">new</span> Product(<span class="string">'ãƒšãƒ¤ãƒ³ã‚°'</span>, <span class="number">275</span>)); <span class="comment">// æ(Order)ã®ä¸­ã«è‘‰(Product)ã‚’å…¥ã‚Œã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³</span></span><br><span class="line"></span><br><span class="line">$may_order = <span class="keyword">new</span> Order(<span class="string">'5/21 æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿'</span>);</span><br><span class="line">$may_order-&gt;add($tamade_order); <span class="comment">// æ(Order)ã®ä¸­ã«æ(Order)ã‚’ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ãƒˆã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³</span></span><br><span class="line">$may_order-&gt;add($seven_order);</span><br><span class="line"></span><br><span class="line">$may_order-&gt;getPrice();</span><br></pre></td></tr></table></figure></p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><ol><li>æã¨è‘‰ãŒåˆ©ç”¨ã™ã‚‹æŠ½è±¡ã«ä¾å­˜ã™ã‚‹ã€‚</li><li>æã¨è‘‰ã§åŒã˜ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã‚’æä¾›ã™ã‚‹ã€‚</li><li>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ã¯ã€æãªã®ã‹è‘‰ãªã®ã‹ã¯æ„è­˜ã™ã‚‹å¿…è¦ãŒã‚ã¾ã‚Šãªã„ã€‚</li></ol><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://ja.wikipedia.org/wiki/Composite_%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3" target="_blank" rel="noopener">Wiki Pedia</a><br><a href="http://d.hatena.ne.jp/shimooka/20141216/1418705320" target="_blank" rel="noopener">å‚è€ƒ</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æ¦‚è¦&quot;&gt;&lt;a href=&quot;#æ¦‚è¦&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¦&quot;&gt;&lt;/a&gt;æ¦‚è¦&lt;/h2&gt;&lt;p&gt;å€‹ã€…ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ(è‘‰)ã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é›†åˆ(æ)ã‚’åŒã˜æ§˜ã«æ‰±ã†ã“ã¨ãŒã§ãã‚‹æ§˜ã«ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€å®šç¾©ã•ã‚Œã¦ã„ã‚‹&lt;cod
      
    
    </summary>
    
    
      <category term="PHP" scheme="https://ytetsuro.github.io/blog/tags/PHP/"/>
    
      <category term="Design Pattern" scheme="https://ytetsuro.github.io/blog/tags/Design-Pattern/"/>
    
      <category term="GoF" scheme="https://ytetsuro.github.io/blog/tags/GoF/"/>
    
  </entry>
  
  <entry>
    <title>Command</title>
    <link href="https://ytetsuro.github.io/blog/2018/05/24/Command/"/>
    <id>https://ytetsuro.github.io/blog/2018/05/24/Command/</id>
    <published>2018-05-24T14:27:06.000Z</published>
    <updated>2018-05-24T18:16:16.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h2><p>ã‚³ãƒãƒ³ãƒ‰(<code>è¦æ±‚</code>)ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã€<br><code>è¦æ±‚</code>ã¨<code>è¦æ±‚ã®å—ä»˜</code>ã¨<code>è¦æ±‚ã®å¯¾å¿œ</code>ã‚’åˆ†é›¢ã—ã¦ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚</p><h2 id="åˆ©ç‚¹"><a href="#åˆ©ç‚¹" class="headerlink" title="åˆ©ç‚¹"></a>åˆ©ç‚¹</h2><ul><li><code>è¦æ±‚</code>ã¨<code>è¦æ±‚ã®å—ä»˜</code>ã¨<code>è¦æ±‚ã®å¯¾å¿œ</code>ã‚’åˆ¥ã€…ã§è€ƒãˆã¦å®Ÿè£…ã§ãã‚‹ã®ã§ã€<code>è¦æ±‚</code>ãŒè¿½åŠ ã•ã‚Œã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¼·ã„ã€‚</li><li><code>è¦æ±‚ã®å¯¾å¿œ</code>ãŒç‹¬ç«‹ã—ã¦ã„ã¦ã€å†åˆ©ç”¨æ€§ãŒé«˜ã„ã€‚</li></ul><h2 id="ä¾‹"><a href="#ä¾‹" class="headerlink" title="ä¾‹"></a>ä¾‹</h2><p>æ–™é‡‘è¨ˆç®—ã®å‰²å¼•ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè£…ã™ã‚‹</p><h3 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h3><h4 id="é‡è¦ãªã¨ã“ã‚"><a href="#é‡è¦ãªã¨ã“ã‚" class="headerlink" title="é‡è¦ãªã¨ã“ã‚"></a>é‡è¦ãªã¨ã“ã‚</h4><p><code>è¦æ±‚</code>ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p><p><img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuKfCAYufIamkKKZEIImkLd39B4xEByqhSSxFpKtCIr6evb9Gq5Oeoyy4Cc5AQnLIeAeqDBbgkRWWEZqISzBmwCQc9IInWcWTs8otgT7JGtSn5nP3iQfpICrB0GO00000"></p><p>ã“ã®æ™‚ã€<code>è¦æ±‚</code>ã¯ã€æŠ½è±¡ã‚¯ãƒ©ã‚¹ã¨å…·è±¡ã‚¯ãƒ©ã‚¹ã§å®Ÿè£…ã™ã‚‹ã€‚</p><p><code>è¦æ±‚ã®å—ä»˜</code>ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p><p><img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuKfCAYufIamkKKZEIImkLd39B4xEByqhSSxFpKtCIr6evb9Gq5Oeoyy4Cc5AQnLIeAeqDBbgkRWWEZqISzBmwCQc9IInWaGTQCezyyhoirEBmBfqqIMZOnLKaY5CXA75gJ1f3NIhOOer4QgBIlCWjcFpd4sDdXwwdLnOl8HL7OOYJ3LGpt4vfEQb06CA0000"></p><p>å®Ÿè£…ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯<code>è¦æ±‚</code>ã®æŠ½è±¡ã‚¯ãƒ©ã‚¹ã¸ä¾å­˜ã•ã›ã‚‹ã€‚</p><p><img src="https://www.plantuml.com/plantuml/svg/bL8z3y8W5Dpv5M_eqCRON-3GH0VT7DoCQP2YQMp1yD6OQF-xj40abCK9tdjtxxWBbLHOADrt25-b4fWe81sM4dQj95mpjULzZra3RmImXgDe2ONiEHsciOAw9fmPeYOg3uV5F1ruQvX-ymYDMveNQ4J82krnTqk9ENQASiAlFnaH_C06_g32cOg6vmjan5v_IoNrupoMzk30ij0iLBV1MB6MgJ2_gRpJwQr1PVpDZNLaQERwgdOv6vLKX9jFMSREK2Au96u1Mc9SXCXwIm1GHLbZFjON"></p><h3 id="PHPã§æ›¸ã„ã¦ã¿ã‚‹"><a href="#PHPã§æ›¸ã„ã¦ã¿ã‚‹" class="headerlink" title="PHPã§æ›¸ã„ã¦ã¿ã‚‹"></a>PHPã§æ›¸ã„ã¦ã¿ã‚‹</h3><p><code>è¦æ±‚</code>ã®æŠ½è±¡ã‚¯ãƒ©ã‚¹<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">DiscountCommand</span> </span>&#123;</span><br><span class="line">  <span class="keyword">protected</span> $price;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(Price $price)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;price = $price;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">discount</span><span class="params">()</span> : <span class="title">void</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>è¦æ±‚</code>ã®å…·è±¡ã‚¯ãƒ©ã‚¹<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HalfDiscountCommand</span> <span class="keyword">extends</span> <span class="title">DiscountCommand</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">discount</span><span class="params">()</span> : <span class="title">void</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;price-&gt;discount(round(<span class="keyword">$this</span>-&gt;price-&gt;get() / <span class="number">2</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TaxDiscountCommand</span> <span class="keyword">extends</span> <span class="title">DiscountCommand</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">discount</span><span class="params">()</span> : <span class="title">void</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;price-&gt;discount(<span class="keyword">$this</span>-&gt;price-&gt;getTax());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>è¦æ±‚ã®å—ä»˜</code>ã®å®Ÿè£…<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DiscountCommandInvoker</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $commands = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setCommand</span><span class="params">(DiscountCommand $command)</span> // æŠ½è±¡ã«ä¾å­˜ã•ã›ã‚‹</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;commands[] = $command;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;commands <span class="keyword">as</span> $command)</span><br><span class="line">    &#123;</span><br><span class="line">      $command-&gt;discount();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>è¦æ±‚ã®å¯¾å¿œ</code>ã®å®Ÿè£…<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Price</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $price;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(int $price)</span> // æŠ½è±¡ã«ä¾å­˜ã•ã›ã‚‹</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;price = $price;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span><span class="params">()</span> : <span class="title">int</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;price;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getTax</span><span class="params">()</span> : <span class="title">int</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;price - floor(<span class="keyword">$this</span>-&gt;price / <span class="number">1.08</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">discount</span><span class="params">(int $price)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;price = <span class="keyword">$this</span>-&gt;price - $price;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Client Code<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$price = <span class="keyword">new</span> Price(<span class="number">216</span>);</span><br><span class="line">$invoker = <span class="keyword">new</span> DiscountCommandInvoker();</span><br><span class="line">$invoker-&gt;setCommand(<span class="keyword">new</span> TaxDiscountCommand($price));</span><br><span class="line">$invoker-&gt;setCommand(<span class="keyword">new</span> HalfDiscountCommand($price));</span><br><span class="line"></span><br><span class="line">$invoker-&gt;run();</span><br><span class="line"><span class="keyword">echo</span> $price-&gt;get() . <span class="string">'å††'</span>;</span><br></pre></td></tr></table></figure></p><p>ã“ã‚Œã§ã€å®Œå…¨ã«<code>è¦æ±‚</code>ã¨<code>è¦æ±‚ã®å—ä»˜</code>ã¨<code>è¦æ±‚ã®å¯¾å¿œ</code>ãŒåˆ†é›¢ã•ã‚ŒãŸã€‚<br>ã¾ãŸã€<code>è¦æ±‚ã®å¯¾å¿œ</code>ãŒç‹¬ç«‹ã—ã¦ã„ã¦å†åˆ©ç”¨ãŒéå¸¸ã«ã—ã‚„ã™ã„ã€‚</p><p>å‰²å¼•ç¨®åˆ¥ãŒå¢—ãˆãŸå ´åˆã§ã‚‚ã€setCommandã‚’åˆ©ç”¨ã—ã¦æ–°ã—ã„å‰²å¼•ç¨®åˆ¥ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§å‰²å¼•é‡‘é¡ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚</p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><ol><li><code>è¦æ±‚</code>ã¨<code>è¦æ±‚ã®å—ä»˜</code>ã¨<code>è¦æ±‚ã®å¯¾å¿œ</code>ã‚’åˆ†é›¢ã™ã‚‹ã€‚</li><li><code>è¦æ±‚ã®å—ä»˜</code>ã¯<code>è¦æ±‚</code>ã®æŠ½è±¡ã«ä¾å­˜ã—ã€<code>è¦æ±‚</code>ã¯<code>è¦æ±‚ã®å¯¾å¿œ</code>ã«ä¾å­˜ã™ã‚‹ã€‚</li></ol><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://ja.wikipedia.org/wiki/Command_%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3" target="_blank" rel="noopener">WikiPedia</a><br><a href="https://github.com/acroquest/javabook-support/issues/25" target="_blank" rel="noopener">Javaæœ¬æ ¼å…¥é–€</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æ¦‚è¦&quot;&gt;&lt;a href=&quot;#æ¦‚è¦&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¦&quot;&gt;&lt;/a&gt;æ¦‚è¦&lt;/h2&gt;&lt;p&gt;ã‚³ãƒãƒ³ãƒ‰(&lt;code&gt;è¦æ±‚&lt;/code&gt;)ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã€&lt;br&gt;&lt;code&gt;è¦æ±‚&lt;/code&gt;ã¨&lt;code&gt;è¦æ±‚ã®å—ä»˜&lt;
      
    
    </summary>
    
    
      <category term="PHP" scheme="https://ytetsuro.github.io/blog/tags/PHP/"/>
    
      <category term="Design Pattern" scheme="https://ytetsuro.github.io/blog/tags/Design-Pattern/"/>
    
      <category term="GoF" scheme="https://ytetsuro.github.io/blog/tags/GoF/"/>
    
  </entry>
  
  <entry>
    <title>Collecting Parameter</title>
    <link href="https://ytetsuro.github.io/blog/2018/05/22/Collecting-Parameter/"/>
    <id>https://ytetsuro.github.io/blog/2018/05/22/Collecting-Parameter/</id>
    <published>2018-05-22T10:56:55.000Z</published>
    <updated>2018-05-23T05:09:06.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h2><p>å‡¦ç†æ¯ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ†ã‘ã¦ã€åˆ†ã‘ãŸãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸­ã§æƒ…å ±ã‚’è“„ç©ã—ã¦ã„ããƒ‘ã‚¿ãƒ¼ãƒ³ã€‚</p><p>ã“ã‚Œã«åå‰ãŒã‚ã£ãŸã®ã‹ã¨é©šã„ã¦ã€ã‚³ãƒ¬ã‚¸ãƒ£ãƒŠã‚¤ã¨æ€ã„ èª¿ã¹ç›´ã—ã‚’ã—ã™ãã¦èª¿ã¹ã‚‹ã®ã«ã™ã”ãæ™‚é–“ãŒã‹ã‹ã£ãŸã€‚</p><h2 id="åˆ©ç‚¹"><a href="#åˆ©ç‚¹" class="headerlink" title="åˆ©ç‚¹"></a>åˆ©ç‚¹</h2><p>1ã¤ã®å¤‰æ•°ã«åŠ å·¥ã—ãŸå€¤ã‚’ã¾ã¨ã‚ã¦è¿”ã™å ´åˆã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãŒã—ã‚„ã™ããªã£ãŸã‚Šã€å¯èª­æ€§ãŒå‘ä¸Šã™ã‚‹ã€‚</p><h2 id="ä¾‹"><a href="#ä¾‹" class="headerlink" title="ä¾‹"></a>ä¾‹</h2><p>HTMLãƒ•ã‚¡ã‚¤ãƒ«ãŒå‚ç…§ã—ã¦ã„ã‚‹å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€HTMLã‚’åŸ‹ã‚è¾¼ã‚“ã å½¢ã«å¤‰æ›´ã™ã‚‹ã€‚</p><h3 id="PHPã§æ›¸ã„ã¦ã¿ã‚‹"><a href="#PHPã§æ›¸ã„ã¦ã¿ã‚‹" class="headerlink" title="PHPã§æ›¸ã„ã¦ã¿ã‚‹"></a>PHPã§æ›¸ã„ã¦ã¿ã‚‹</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HtmlConverter</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">toMonolithic</span><span class="params">(string $html)</span> : <span class="title">string</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">      $doc = <span class="keyword">new</span> DOMDocument();</span><br><span class="line">      libxml_use_internal_errors(<span class="keyword">true</span>);</span><br><span class="line">      $doc-&gt;loadHTML($html);</span><br><span class="line">      libxml_clear_errors();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// linkã‚¿ã‚°ã®ãƒ‘ãƒ¼ã‚¹</span></span><br><span class="line">      $linkNode = $doc-&gt;getElementsByTagName(<span class="string">'link'</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å…ƒã®DOMã‚’æ¶ˆã™ã®ã§foreachã§ã¯å‡¦ç†ã—ãªã„</span></span><br><span class="line">      <span class="keyword">for</span> ($i = <span class="number">0</span>, $count = $linkNode-&gt;length - <span class="number">1</span>; $i &lt;= $count; $i++) &#123;</span><br><span class="line">          $child = $linkNode-&gt;item(<span class="number">0</span>);</span><br><span class="line">          $path = $child-&gt;getAttribute(<span class="string">'href'</span>);</span><br><span class="line">          $css_string = file_get_contents($path);</span><br><span class="line">          $replace_elm = $doc-&gt;createElement(<span class="string">'style'</span>, $css_string);</span><br><span class="line">          $elm_type_attr = $doc-&gt;createAttribute(<span class="string">'type'</span>);</span><br><span class="line">          $elm_type_attr-&gt;value = <span class="string">'text/css'</span>;</span><br><span class="line">          $replace_elm-&gt;appendChild($elm_type_attr);</span><br><span class="line">          $child-&gt;parentNode-&gt;replaceChild($replace_elm, $child);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// scriptã‚¿ã‚°ã®ãƒ‘ãƒ¼ã‚¹</span></span><br><span class="line">      $scriptNode = $doc-&gt;getElementsByTagName(<span class="string">'script'</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å…ƒã®DOMã‚’æ¶ˆã™ã®ã§foreachã§ã¯å‡¦ç†ã—ãªã„</span></span><br><span class="line">      $skip_item_count = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> ($i = <span class="number">0</span>, $count = $scriptNode-&gt;length - <span class="number">1</span>; $i &lt;= $count; $i++) &#123;</span><br><span class="line">          $child = $scriptNode-&gt;item($skip_item_count);</span><br><span class="line">          <span class="comment">// å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ã„ãªã„å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹</span></span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">empty</span>($child) &amp;&amp; ! $child-&gt;hasAttribute(<span class="string">'src'</span>)) &#123;</span><br><span class="line">              $skip_item_count++;</span><br><span class="line">              <span class="keyword">continue</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          $path = $child-&gt;getAttribute(<span class="string">'src'</span>);</span><br><span class="line">          $javascript_string = file_get_contents($path);</span><br><span class="line">          $replace_elm = $doc-&gt;createElement(<span class="string">'script'</span>);</span><br><span class="line">          $replace_elm-&gt;appendChild($doc-&gt;createTextNode($javascript_string));</span><br><span class="line">          $child-&gt;parentNode-&gt;replaceChild($replace_elm, $child);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// imgã‚¿ã‚°ã®ãƒ‘ãƒ¼ã‚¹</span></span><br><span class="line">      $imgNode = $doc-&gt;getElementsByTagName(<span class="string">'img'</span>);</span><br><span class="line">      <span class="keyword">foreach</span> ($imgNode <span class="keyword">as</span> $child) &#123;</span><br><span class="line">          $path = $child-&gt;getAttribute(<span class="string">'src'</span>);</span><br><span class="line">          $ext = substr($path, (strrpos($path, <span class="string">'.'</span>) + <span class="number">1</span> ));</span><br><span class="line">          $img_binary = base64_encode(file_get_contents($path));</span><br><span class="line">          $child-&gt;setAttribute(<span class="string">'src'</span>, <span class="string">'data:image/'</span>.$ext.<span class="string">';base64,'</span>.$img_binary);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> $doc-&gt;saveHTML();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã®æ§˜ã«1ãƒ¡ã‚½ãƒƒãƒ‰ãŒé•·ã„ã€‚<br>ã“ã®ä¸­ã§ã€æƒ…å ±ã‚’è“„ç©ã—ã¦ã„ã‚‹<code>DOMDocument</code>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ($docå¤‰æ•°)ãŒå­˜åœ¨ã™ã‚‹</p><p>ä»¥ä¸‹ã®æ§˜ã«å‡¦ç†æ¯ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ†å‰²ã™ã‚‹ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HtmlConverter</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">toMonolithic</span><span class="params">(string $html)</span> : <span class="title">string</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    $doc = <span class="keyword">new</span> DOMDocument();</span><br><span class="line">    libxml_use_internal_errors(<span class="keyword">true</span>);</span><br><span class="line">    $doc-&gt;loadHTML($html);</span><br><span class="line">    libxml_clear_errors();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">$this</span>-&gt;replaceLinkTag($doc);</span><br><span class="line">    <span class="keyword">$this</span>-&gt;replaceScriptTag($doc);</span><br><span class="line">    <span class="keyword">$this</span>-&gt;replaceImgTag($doc);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> $doc-&gt;saveHTML();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">replaceLinkTag</span><span class="params">(DOMDocument $doc)</span> : <span class="title">void</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="comment">// linkã‚¿ã‚°ã®ãƒ‘ãƒ¼ã‚¹</span></span><br><span class="line">    $linkNode = $doc-&gt;getElementsByTagName(<span class="string">'link'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…ƒã®DOMã‚’æ¶ˆã™ã®ã§foreachã§ã¯å‡¦ç†ã—ãªã„</span></span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">0</span>, $count = $linkNode-&gt;length - <span class="number">1</span>; $i &lt;= $count; $i++) &#123;</span><br><span class="line">      $child = $linkNode-&gt;item(<span class="number">0</span>);</span><br><span class="line">      $path = $child-&gt;getAttribute(<span class="string">'href'</span>);</span><br><span class="line">      $css_string = file_get_contents($path);</span><br><span class="line">      $replace_elm = $doc-&gt;createElement(<span class="string">'style'</span>, file_get_contents($path));</span><br><span class="line">      $elm_type_attr = $doc-&gt;createAttribute(<span class="string">'type'</span>);</span><br><span class="line">      $elm_type_attr-&gt;value = <span class="string">'text/css'</span>;</span><br><span class="line"></span><br><span class="line">      $replace_elm-&gt;appendChild($elm_type_attr);</span><br><span class="line">      $child-&gt;parentNode-&gt;replaceChild($replace_elm, $child);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">replaceScriptTag</span><span class="params">(DOMDocument $do)</span> : <span class="title">void</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="comment">// scriptã‚¿ã‚°ã®ãƒ‘ãƒ¼ã‚¹</span></span><br><span class="line">    $scriptNode = $doc-&gt;getElementsByTagName(<span class="string">'script'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…ƒã®DOMã‚’æ¶ˆã™ã®ã§foreachã§ã¯å‡¦ç†ã—ãªã„</span></span><br><span class="line">    $skip_item_count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">0</span>, $count = $scriptNode-&gt;length - <span class="number">1</span>; $i &lt;= $count; $i++) &#123;</span><br><span class="line">      $child = $scriptNode-&gt;item($skip_item_count);</span><br><span class="line">      <span class="comment">// å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ã„ãªã„å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">empty</span>($child) &amp;&amp; ! $child-&gt;hasAttribute(<span class="string">'src'</span>)) &#123;</span><br><span class="line">          $skip_item_count++;</span><br><span class="line">          <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      $path = $child-&gt;getAttribute(<span class="string">'src'</span>);</span><br><span class="line">      $javascript_string = file_get_contents($path);</span><br><span class="line">      $replace_elm = $doc-&gt;createElement(<span class="string">'script'</span>);</span><br><span class="line"></span><br><span class="line">      $replace_elm-&gt;appendChild($doc-&gt;createTextNode($javascript_string));</span><br><span class="line">      $child-&gt;parentNode-&gt;replaceChild($replace_elm, $child);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">replaceImgTag</span><span class="params">(DOMDocument $doc)</span> : <span class="title">void</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="comment">// imgã‚¿ã‚°ã®ãƒ‘ãƒ¼ã‚¹</span></span><br><span class="line">    $imgNode = $doc-&gt;getElementsByTagName(<span class="string">'img'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> ($imgNode <span class="keyword">as</span> $child) &#123;</span><br><span class="line">      $path = $child-&gt;getAttribute(<span class="string">'src'</span>);</span><br><span class="line">      $ext = substr($path, (strrpos($path, <span class="string">'.'</span>) + <span class="number">1</span> ));</span><br><span class="line">      $img_binary = base64_encode(file_get_contents($path));</span><br><span class="line">      $child-&gt;setAttribute(<span class="string">'src'</span>, <span class="string">'data:image/'</span>.$ext.<span class="string">';base64,'</span>.$img_binary);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ãªã‚“ã¨ã„ã†ã“ã¨ã§ã—ã‚‡ã†ã€‚<br>é•·ã‹ã£ãŸ1ãƒ¡ã‚½ãƒƒãƒ‰ãŒã€å‡¦ç†æ¯ã«åˆ†å‰²ã•ã‚Œã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’è¡Œã„ã‚„ã™ã„æ§˜ã«ç”Ÿã¾ã‚Œå¤‰ã‚ã‚Šã¾ã—ãŸã€‚</p><p>ã¾ãŸã€ã“ã‚Œã‚‰ã®åˆ†å‰²ã•ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã¨ã—ã¦ã€<br>æƒ…å ±ã‚’è“„ç©ã—ã¦ã„ã‚‹<code>DOMDocument</code>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã—ã¦ãã‚Œãã‚Œã®ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§æƒ…å ±ã‚’æ›´æ–°ã•ã›ã‚‹ã¨ã„ã†ã“ã¨ã‚’ç¹°ã‚Šè¿”ã™ã€‚</p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><ol><li>æƒ…å ±ã‚’è“„ç©ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ ä½œã‚‹ or è¦‹ã¤ã‘ã‚‹ã€‚</li><li>å‡¦ç†æ¯ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŠ½å‡ºã—ã€æƒ…å ±ã‚’ç´¯ç©ã™ã‚‹ã‚ªã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦æ¸¡ã™ã€‚</li><li>ã“ã‚Œã‚‰ã‚’ç¹°ã‚Šè¿”ã™ã€‚</li></ol><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://scrutinizer-ci.com/docs/refactorings/move-accumulation-to-collecting-parameter" target="_blank" rel="noopener">Move Accumulation to Collecting Parameter - Refactoring - Measure and Improve Code Quality continuously with Scrutinizer</a><br><a href="http://tbpgr.hatenablog.com/entry/20120526/1338039091" target="_blank" rel="noopener">æ›¸ç± Refactoring to Patterns | Accumulation| Move Accumulation to Collecting Parameter</a><br><a href="https://www.industriallogic.com/xp/refactoring/accumulationToCollection.html" target="_blank" rel="noopener">Move Accumulation to Collecting Parameter</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æ¦‚è¦&quot;&gt;&lt;a href=&quot;#æ¦‚è¦&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¦&quot;&gt;&lt;/a&gt;æ¦‚è¦&lt;/h2&gt;&lt;p&gt;å‡¦ç†æ¯ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ†ã‘ã¦ã€åˆ†ã‘ãŸãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸­ã§æƒ…å ±ã‚’è“„ç©ã—ã¦ã„ããƒ‘ã‚¿ãƒ¼ãƒ³ã€‚&lt;/p&gt;
&lt;p&gt;ã“ã‚Œã«åå‰ãŒã‚ã£ãŸã®ã‹ã¨é©šã„ã¦ã€ã‚³ãƒ¬ã‚¸ãƒ£ãƒŠã‚¤ã¨æ€ã„
      
    
    </summary>
    
    
      <category term="PHP" scheme="https://ytetsuro.github.io/blog/tags/PHP/"/>
    
      <category term="Design Pattern" scheme="https://ytetsuro.github.io/blog/tags/Design-Pattern/"/>
    
      <category term="Kent Beck" scheme="https://ytetsuro.github.io/blog/tags/Kent-Beck/"/>
    
  </entry>
  
  <entry>
    <title>Chain of Responsibility</title>
    <link href="https://ytetsuro.github.io/blog/2018/05/21/Chain-of-Responsibility/"/>
    <id>https://ytetsuro.github.io/blog/2018/05/21/Chain-of-Responsibility/</id>
    <published>2018-05-21T13:23:12.000Z</published>
    <updated>2018-05-22T07:19:34.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h2><ul><li><code>è¦æ±‚</code>ã‚’<code>å‡¦ç†</code>ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒã‚§ãƒ¼ãƒ³çŠ¶ã«ã¤ãªãã€‚</li><li><code>è¦æ±‚</code>ã‚’<code>å‡¦ç†</code>ã™ã‚‹ã¾ã§ãƒã‚§ãƒ¼ãƒ³ã«æ²¿ã£ã¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸è¦æ±‚ã‚’æ¸¡ã—ã¦ã„ãã€‚</li></ul><p>ã‚’è¡Œã†ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³</p><p>è²¬ä»»ã®ãŸã‚‰ã„å›ã—ã¨ã‚‚è¨€ã‚ã‚Œã¦ãŠã‚Šã€‚<br>ãƒã‚§ãƒ¼ãƒ³çŠ¶ã«ç¹‹ãŒã‚ŒãŸãŠbã‚¸ã‚§ã‚¯ãƒˆã¯ã€è‡ªåˆ†ã®è²¬ä»»ç¯„å›²ä»¥å¤–ã¯å‡¦ç†ã—ãªã„ã€‚</p><h2 id="åˆ©ç‚¹"><a href="#åˆ©ç‚¹" class="headerlink" title="åˆ©ç‚¹"></a>åˆ©ç‚¹</h2><ul><li>ãƒã‚§ãƒ¼ãƒ³ã‚’å‹•çš„ã«å¤‰æ›´ã—ã‚„ã™ã„ã€‚</li><li><code>å‡¦ç†</code>ã¨<code>è¦æ±‚</code>ãŒç·©ã„çµåˆã«ãªã‚‹ã€‚(è¦æ±‚ã¯å¿…ãšå‡¦ç†ã•ã‚Œã‚‹ã‚ã‘ã§ã¯ãªã„)</li><li><code>å‡¦ç†</code>ã®è¿½åŠ ãŒå®¹æ˜“ã€‚</li><li>è¤‡æ•°ã®æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ã‚‚ã®ãŒã‚ã‚‹ã‹ã‚’åˆ¤å®šã™ã‚‹ã¨ãã«ä½¿ã„ã‚„ã™ã„ã€‚</li></ul><h2 id="ä¾‹"><a href="#ä¾‹" class="headerlink" title="ä¾‹"></a>ä¾‹</h2><p>ãã˜ã®æŠ½é¸ã‚’è¡Œã†ã€‚<br>æŠ½é¸æ¡ä»¶ã¯ã€ä¸‹è¨˜ã®2é …ç›®ã®ã†ã¡ã©ã‚Œã‹ã‚’æº€ãŸã•ãªã„å ´åˆã¯ãƒã‚ºãƒ¬</p><ul><li>æŠ½é¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®isRichãƒ•ãƒ©ã‚°ãŒfalseã§ã‚ã‚‹ã€‚</li><li>æŠ½é¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®virtuousãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒ20ä»¥ä¸Šã‚ã‚‹ã€‚</li><li>æŠ½é¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®fortuneãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒä¹±æ•°(1ã€œ100)ã‚’ä¸Šå›ã‚‹ã€‚</li></ul><h3 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h3><h4 id="é‡è¦ãªã¨ã“ã‚"><a href="#é‡è¦ãªã¨ã“ã‚" class="headerlink" title="é‡è¦ãªã¨ã“ã‚"></a>é‡è¦ãªã¨ã“ã‚</h4><p>ãƒã‚§ãƒ¼ãƒ³çŠ¶ã«ã¤ãªãåŸºåº•ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…ã€‚</p><p><img src="https://www.plantuml.com/plantuml/svg/RO-z3i8m38JtF8M734M8Pw0IdHXOcVDZLK71aM9N85LzTm99behjTFxEFeyi9iloZCfObcoSW8k66Uw1AD1yNVoC6LO5SEhUX2vmI7G6JVYMYXJWk0inogtCctb9v8EK60zx1xJhyl3ROrEA4BXnmvJDozY8e7rJ5Ljxvwqc7j-xV-bDZKY-lFa1"></p><p>ã‚ã¨ã¯ã€æ¡ä»¶åˆ¤å®šã”ã¨ã«ã‚¯ãƒ©ã‚¹ã‚’å®Ÿè£…ã™ã‚‹ã€‚<br>ã“ã“ãŒã€<code>è¦æ±‚</code>ã‚’<code>å‡¦ç†</code>ã™ã‚‹éƒ¨åˆ†ã¨ãªã‚‹ã€‚</p><p><img src="https://www.plantuml.com/plantuml/svg/dPAn3e8m48RtFiKD31WYJs0YKIUZnab7Kze6g_MQj4KbX7Ut2YI23EfskNv_x_ylbrX7ZSilYj3KEaEP0wQejR2NY1ApPSupOQ0a0EEsDzV8fPCQfn2WkBl3aI9NmdWcwkciS1jFz8Ksx7SWO6qvUlsJQgr0seOB5uRUQAe41BofQgniRLUrulISEqXNXDJ9jlegZ2lUaaLVQtVIBqldTatnB_qgP-TYfdyTtbtg98wx8GRUFumEC5qp9178_I4y0000"></p><h3 id="PHPã§æ›¸ã„ã¦ã¿ã‚‹"><a href="#PHPã§æ›¸ã„ã¦ã¿ã‚‹" class="headerlink" title="PHPã§æ›¸ã„ã¦ã¿ã‚‹"></a>PHPã§æ›¸ã„ã¦ã¿ã‚‹</h3><p>WinningJudger(Chain of Responsibility)<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">WinningJudger</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $nextJudger;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setNextWinningConditions</span><span class="params">(WinningJudger $condition)</span> : <span class="title">WinningJudger</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;nextJudger = $condition;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isWinning</span><span class="params">(Drawable $drawable)</span> : <span class="title">bool</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    $result = <span class="keyword">$this</span>-&gt;judge($drawable);</span><br><span class="line">    <span class="keyword">if</span> (!$result) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="keyword">isset</span>(<span class="keyword">$this</span>-&gt;nextJudger)) &#123; <span class="comment">// ãƒã‚§ãƒ¼ãƒ³ã«æ²¿ã£ã¦è¦æ±‚ã‚’æ¸¡ã™</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;nextJudger-&gt;isWinning($drawable);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>; <span class="comment">// ä½•ã‚‚å‡¦ç†ã•ã‚Œãªã‹ã£ãŸå ´åˆã¯trueã‚’è¿”ã™</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">judge</span><span class="params">(Drawable $drawable)</span> : <span class="title">bool</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ¬¡ã®åˆ¤å®šãŒå­˜åœ¨ã™ã‚Œã°ã€ãã‚Œã‚’å®Ÿè¡Œã™ã‚‹æ§˜ã«å®Ÿè£…ã—ã¾ã™ã€‚</p><p>ã‚ã¨ã¯ã€ãã‚Œãã‚Œã®åˆ¤å®šå‡¦ç†ã‚’å®Ÿè£…ã—ã¾ã™ã€‚</p><p>PovertyJudger<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PovertyJudger</span> <span class="keyword">extends</span> <span class="title">WinningJudger</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">judge</span><span class="params">(Drawable $drawable)</span> : <span class="title">bool</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $drawable-&gt;isRich() === <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>VirtuousManJudger<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VirtuousManJudger</span> <span class="keyword">extends</span> <span class="title">WinningJudger</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">judge</span><span class="params">(Drawable $drawable)</span> : <span class="title">bool</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $drawable-&gt;getVirtuous() &gt;= <span class="number">20</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>LuckyBoyJudger<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VirtuousManJudger</span> <span class="keyword">extends</span> <span class="title">WinningJudger</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">judge</span><span class="params">(Drawable $drawable)</span> : <span class="title">bool</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $drawable-&gt;getFortune() &gt;= mt_rand(<span class="number">1</span>, <span class="number">100</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ã“ã®æ§˜ã«ã€ãã‚Œãã‚Œã®åˆ¤å®šéƒ¨åˆ†ã§<code>è¦æ±‚</code>ã‚’<code>å‡¦ç†</code>ã™ã‚‹ã€‚<br>ã“ã®ã¨ãã€ãã‚Œãã‚Œã®åˆ¤å®šéƒ¨åˆ†ã¯<code>å‡¦ç†</code>ã«ã®ã¿æ³¨åŠ›ã™ã‚Œã°ã‚ˆã„ã€‚</p><p>Drawable<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Drawable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $fortune;</span><br><span class="line">  <span class="keyword">private</span> $virtuous;</span><br><span class="line">  <span class="keyword">private</span> $rich;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(int $fortune, int $virtuous, bool $rich)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;fortune = $fortune;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;virtuous = $virtuous;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;rich = $rich;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isRich</span><span class="params">()</span> : <span class="title">bool</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (bool)<span class="keyword">$this</span>-&gt;rich;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getFortune</span><span class="params">()</span> : <span class="title">int</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (int)<span class="keyword">$this</span>-&gt;fortune;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getVirtuous</span><span class="params">()</span> : <span class="title">int</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (int)<span class="keyword">$this</span>-&gt;virtuous;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Client Code<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$povertyJudger = <span class="keyword">new</span> PovertyJudger();</span><br><span class="line">$virtuousManJudger = <span class="keyword">new</span> VirtuousManJudger();</span><br><span class="line">$luckyBoyJudger = <span class="keyword">new</span> LuckyBoyJudger();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ãƒã‚§ãƒ¼ãƒ³ã‚’ä½œæˆ</span></span><br><span class="line">$virtuousManJudger-&gt;nextJudger($luckyBoyJudger);</span><br><span class="line">$povertyJudger-&gt;nextJudger($virtuousManJudger);</span><br><span class="line"></span><br><span class="line">$drawable = <span class="keyword">new</span> Drawable(<span class="number">101</span>, <span class="number">530000</span>, <span class="keyword">true</span>);</span><br><span class="line"><span class="keyword">if</span> ($povertyJudger-&gt;isWinning($drawable)) &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">'ã‚ãŸã‚Šã§ã™ã€‚'</span>;</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'ãƒã‚ºãƒ¬ã§ã™ã€‚'</span>;</span><br></pre></td></tr></table></figure></p><p>ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€æ¬¡ã®é †ã«ãƒã‚§ãƒ¼ãƒ³ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚</p><ol><li>virtuousManJudger -&gt; luckyBoyJudger</li><li>povertyJudger -&gt; virtuousManJudger -&gt; luckyBoyJudger</li></ol><p>ä»Šå›ã¯æ±ºã‚æ‰“ã¡ã§ä½œæˆã—ã¦ã„ã¾ã™ãŒã€nextJudgerãƒ¡ã‚½ãƒƒãƒ‰ã‚’callã™ã‚‹ã ã‘ãªã®ã§ã€å‹•çš„ã«ã‚‚ä½œæˆã—ã‚„ã™ãã€<br>ãƒã‚§ãƒ¼ãƒ³ã®è¿½åŠ ã‚‚å®¹æ˜“ãªæ§‹é€ ã«ãªã£ã¦ã„ã¾ã™ã€‚</p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><ol><li><code>è¦æ±‚</code>ã‚’<code>å‡¦ç†</code>ã™ã‚‹ã‚¯ãƒ©ã‚¹ã®ãƒã‚§ãƒ¼ãƒ³ã‚’ä½œã‚‹</li><li>ãƒã‚§ãƒ¼ãƒ³ã«æ²¿ã£ã¦<code>è¦æ±‚</code>ã‚’æ¸¡ã—ã¦ã„ã</li><li>å¿…ãš<code>å‡¦ç†</code>ã•ã‚Œã‚‹è¨³ã§ã¯ãªã„ã€‚</li></ol><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://ja.wikipedia.org/wiki/Chain_of_Responsibility_%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3" target="_blank" rel="noopener">Wikipeida</a><br><a href="http://www.techscore.com/tech/DesignPattern/ChainOfResponsibility.html" target="_blank" rel="noopener">14ï¼Chain of Responsibility ãƒ‘ã‚¿ãƒ¼ãƒ³ | TECHSCORE(ãƒ†ãƒƒã‚¯ã‚¹ã‚³ã‚¢)</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æ¦‚è¦&quot;&gt;&lt;a href=&quot;#æ¦‚è¦&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¦&quot;&gt;&lt;/a&gt;æ¦‚è¦&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;è¦æ±‚&lt;/code&gt;ã‚’&lt;code&gt;å‡¦ç†&lt;/code&gt;ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒã‚§ãƒ¼ãƒ³çŠ¶ã«ã¤ãªãã€‚&lt;/li&gt;
&lt;li&gt;&lt;cod
      
    
    </summary>
    
    
      <category term="PHP" scheme="https://ytetsuro.github.io/blog/tags/PHP/"/>
    
      <category term="Design Pattern" scheme="https://ytetsuro.github.io/blog/tags/Design-Pattern/"/>
    
      <category term="GoF" scheme="https://ytetsuro.github.io/blog/tags/GoF/"/>
    
  </entry>
  
  <entry>
    <title>Builder</title>
    <link href="https://ytetsuro.github.io/blog/2018/05/20/Builder/"/>
    <id>https://ytetsuro.github.io/blog/2018/05/20/Builder/</id>
    <published>2018-05-20T07:58:14.000Z</published>
    <updated>2018-05-20T20:47:36.000Z</updated>
    
    <content type="html"><![CDATA[<p>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã¨ãã«åˆ©ç”¨ã™ã‚‹ã€‚<br><code>ç”Ÿæˆæ‰‹é †</code>ã¨<code>ç”Ÿæˆæ‰‹æ®µ</code>ã‚’åˆ†ã‘ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚</p><p>å¼•æ•°ãŒå¤šã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿæˆã‚„ã€ç”Ÿæˆã¾ã§ã®æ‰‹é †ãŒè¤‡é›‘ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã¨ã<br>å‡¦ç†ãŒé•·ããªã‚Šã‚„ã™ã„ã®ã§ã€<code>ç”Ÿæˆæ‰‹é †</code>ã¨<code>ç”Ÿæˆæ‰‹æ®µ</code>ã®<code>è²¬ä»»</code>ã‚’åˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ãŒåˆ©ç‚¹</p><h2 id="ä¾‹"><a href="#ä¾‹" class="headerlink" title="ä¾‹"></a>ä¾‹</h2><p>ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã€‚<br>ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ§‹æˆã™ã‚‹è¦ç´ ã¯ã€ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã‚ã‚‹ã€‚</p><h3 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h3><h4 id="é‡è¦ãªã¨ã“ã‚"><a href="#é‡è¦ãªã¨ã“ã‚" class="headerlink" title="é‡è¦ãªã¨ã“ã‚"></a>é‡è¦ãªã¨ã“ã‚</h4><p><code>ç”Ÿæˆæ‰‹æ®µ</code>ã‚’interfaceã¨ã—ã¦å®šç¾©ã—ã¦ã€DirectorãŒ<code>ç”Ÿæˆæ‰‹æ®µ</code>ã«ä¾å­˜ã™ã‚‹ã€‚<br>ã¾ãŸã€ã“ã®ã¨ã<code>ç”Ÿæˆæ‰‹é †</code>ã‚’Directorã«å®Ÿè£…ã™ã‚‹ã€‚</p><p><img src="https://www.plantuml.com/plantuml/svg/NO-n3i8m34HtVuK7XY2aVW531QmiICnLb9eGAKqbsvaG_qxKDW8odiztp-v5BMkU8eIan0_h2AyaOZsTSeWZCRu0yO12kisDA8VaSJUjUb_zkn2RLPsVjgwZ9xsHvAZ5UmEuQ4KgunAOdCuLCWnkJgK-EpND5V-qt_vlPEblSiUkQs40FQMn_Fm1"></p><p><code>ç”Ÿæˆæ‰‹é †</code>ã®è©³ç´°ã‚’å®Ÿè£…ã™ã‚‹</p><p><img src="https://www.plantuml.com/plantuml/svg/lL4x3i8m3Drp2WyTYa0zGOVoMLagCLTHOagaD9LYPmBkJb2922siB95iFx-Fqn1Bps6mmZX6VvOAuOX4iiTTC5QZXwi0M0CXl_ebiJUkXsAOwbMQdmXzELNxYqnmw95Rf60vpkv2A2k9aiR1U5Gy9f6kKwEBz45nENFngPRplrSo_gqUZFj7a1om3F5aWYB4TmCBjSWnSrXNrVmo2yWjOhwa4xcH-WT6DEXq_Em7"></p><p>ã“ã‚Œã§ã€</p><ul><li>ç”Ÿæˆæ‰‹é †(MessageDirector)</li><li>ç”Ÿæˆæ‰‹æ®µ(AdminMessageBuilder)</li></ul><p>ãŒåˆ†é›¢ã•ã‚ŒãŸçŠ¶æ…‹ã«ãªã‚‹ã€‚</p><h3 id="PHPã§æ›¸ã„ã¦ã¿ã‚‹"><a href="#PHPã§æ›¸ã„ã¦ã¿ã‚‹" class="headerlink" title="PHPã§æ›¸ã„ã¦ã¿ã‚‹"></a>PHPã§æ›¸ã„ã¦ã¿ã‚‹</h3><p>MessageBuilder<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageBuilder</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setMessage</span><span class="params">(string $message)</span> : <span class="title">void</span></span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setUser</span><span class="params">()</span> : <span class="title">void</span></span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getResult</span><span class="params">()</span> : <span class="title">ChatMessage</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>AdminMessageBuilder(ç”Ÿæˆæ‰‹æ®µ)<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AdminMessageBuilder</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $message;</span><br><span class="line">  <span class="keyword">private</span> $user;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setMessage</span><span class="params">(string $message)</span> : <span class="title">void</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     <span class="keyword">$this</span>-&gt;message = $message;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setUser</span><span class="params">()</span> : <span class="title">void</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     <span class="keyword">$this</span>-&gt;user = <span class="keyword">new</span> User(<span class="string">'admin'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getResult</span><span class="params">()</span> : <span class="title">ChatMessage</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> ChatMessage(<span class="keyword">$this</span>-&gt;user, <span class="keyword">$this</span>-&gt;message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ã©ã®ã‚ˆã†ã«ç”Ÿæˆã™ã‚‹ã®ã‹(ç”Ÿæˆæ‰‹æ®µ)ã‚’Builderã«è¨˜è¼‰ã™ã‚‹</p><p>MessageDirector<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageDirector</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $builder;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(MessageBuilder $builder)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     <span class="keyword">$this</span>-&gt;builder = $builder;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">construct</span><span class="params">(string $message)</span> : <span class="title">ChatMessage</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     <span class="comment">// ChatMessageã®ç”Ÿæˆæ‰‹é †ã®ã¿ã‚’è¨˜è¼‰ã™ã‚‹ã€‚</span></span><br><span class="line">     <span class="keyword">$this</span>-&gt;builder-&gt;setMessage($message);</span><br><span class="line">     <span class="keyword">$this</span>-&gt;builder-&gt;setUser();</span><br><span class="line"></span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;builder-&gt;getResult();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç”Ÿæˆæ‰‹é †ã‚’Directorã«è¨˜è¼‰ã™ã‚‹ã€‚<br>ã“ã†ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€ä»¥ä¸‹ã®æ§˜ã«ãªã‚‹ã€‚</p><ul><li>Directorã¯ã©ã®ã‚ˆã†ã«ç”Ÿæˆã™ã‚‹ã‹ã¯çŸ¥ã‚‰ãªã„ãŒã€ä½•ã‚’ç”Ÿæˆã™ã‚‹ã‹ã¯çŸ¥ã£ã¦ã„ã‚‹ã€‚</li><li>Builderã¯ã€è‡ªã‚‰ãŒçŸ¥ã£ã¦ã„ã‚‹æ‰‹é †ã«å¾“ã£ã¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿæˆã‚’è¡Œã†ã€‚</li></ul><p>ã™ã‚‹ã¨ã€ç”Ÿæˆæ‰‹æ®µãŒè¤‡é›‘ãªå ´åˆã¯Builderãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã«åˆ†ã‘ã‚‹ã“ã¨ã§ã€<br><code>è²¬ä»»ç¯„å›²</code>ãŒã¯ã£ãã‚Šã—ã‚¯ãƒ©ã‚¹ã‚’ã†ã¾ãåˆ‡ã‚Šåˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚</p><p>ChatMessage<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChatMessage</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $user;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> $message;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(User $user, string $message)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;user = $user;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;message = $message;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__get</span><span class="params">($name)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (! property_exists(<span class="keyword">$this</span>, $name)) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> InvalidArgumentException(<span class="string">'å­˜åœ¨ã—ãªã„Propertyã§ã™'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;&#123;$name&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>User<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $user_role;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(string $user_role)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;user_role = $user_role;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__get</span><span class="params">($name)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (! property_exists(<span class="keyword">$this</span>, $name)) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> InvalidArgumentException(<span class="string">'å­˜åœ¨ã—ãªã„Propertyã§ã™'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;&#123;$name&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Client Code<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$builder  = <span class="keyword">new</span> AdminMessageBuilder();</span><br><span class="line">$director = <span class="keyword">new</span> MessageDirector($builder);</span><br><span class="line">$message  = $director-&gt;construct(<span class="string">'ã“ã‚“ã«ã¡ã¯'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'æœ¬æ–‡ : '</span>. $message-&gt;message;</span><br></pre></td></tr></table></figure></p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><ol><li><code>ç”Ÿæˆæ‰‹é †</code>ã¨<code>ç”Ÿæˆæ‰‹æ®µ</code>ã‚’åˆ†é›¢ã™ã‚‹ã€‚</li><li><code>ç”Ÿæˆæ‰‹æ®µ</code>ãŒè¤‡é›‘ãªå ´åˆã¯<code>è²¬ä»»ç¯„å›²</code>ãŒæ˜ç¢ºãªãŸã‚ã€ã†ã¾ãåˆ‡ã‚Šåˆ†ã‘ã‚„ã™ã„ã€‚</li></ol><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://ja.wikipedia.org/wiki/Builder_%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3" target="_blank" rel="noopener">Wikipedia</a><br><a href="https://qiita.com/disc99/items/840cf9936687f97a482b" target="_blank" rel="noopener">Javaã§æ›¸ãBuilderãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‘ã‚¿ãƒ¼ãƒ³</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã¨ãã«åˆ©ç”¨ã™ã‚‹ã€‚&lt;br&gt;&lt;code&gt;ç”Ÿæˆæ‰‹é †&lt;/code&gt;ã¨&lt;code&gt;ç”Ÿæˆæ‰‹æ®µ&lt;/code&gt;ã‚’åˆ†ã‘ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚&lt;/p&gt;
&lt;p&gt;å¼•æ•°ãŒå¤šã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿæˆã‚„ã€ç”Ÿæˆã¾ã§ã®æ‰‹é †ãŒè¤‡é›‘ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã¨ã&lt;br&gt;å‡¦ç†ãŒé•·ããªã‚Šã‚„ã™ã„ã®ã§ã€&lt;code
      
    
    </summary>
    
    
      <category term="PHP" scheme="https://ytetsuro.github.io/blog/tags/PHP/"/>
    
      <category term="Design Pattern" scheme="https://ytetsuro.github.io/blog/tags/Design-Pattern/"/>
    
      <category term="GoF" scheme="https://ytetsuro.github.io/blog/tags/GoF/"/>
    
  </entry>
  
  <entry>
    <title>Bridge</title>
    <link href="https://ytetsuro.github.io/blog/2018/05/19/Bridge/"/>
    <id>https://ytetsuro.github.io/blog/2018/05/19/Bridge/</id>
    <published>2018-05-19T02:27:28.000Z</published>
    <updated>2018-05-19T14:19:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>ã€Œä½•ã‚’è¡Œã†ã®ã‹(æ©Ÿèƒ½)ã€ã¨ã€Œã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’ã™ã‚‹ã®ã‹(å®Ÿè£…)ã€ãã‚Œãã‚Œã®æ‹¡å¼µæ–¹æ³•ã‚’åˆ†ã‘ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚</p><p>ã€Œä½•ã‚’è¡Œã†ã®ã‹(æ©Ÿèƒ½)ã€ã‚’å®Ÿè£…ã™ã‚‹å ´åˆã¯ã€ã€Œã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’ã™ã‚‹ã®ã‹(å®Ÿè£…)ã€ã‚’æ„è­˜ã—ãªãã¦ã‚‚è‰¯ã„ã®ãŒåˆ©ç‚¹ã€‚</p><p>Bridgeãƒ‘ã‚¿ãƒ¼ãƒ³ã¯å…ˆæ—¥ã®<a href="https://ytetsuro.github.io/blog/2018/05/18/Adapter/">Adapter ãƒ‘ã‚¿ãƒ¼ãƒ³</a>ã¨éå¸¸ã«ã‚ˆãä¼¼ã¦ã„ã‚‹ãŒã€<br>Adapterãƒ‘ã‚¿ãƒ¼ãƒ³ã¯<code>æ—¢å­˜ã®ã‚¯ãƒ©ã‚¹</code>ã‚’å†åˆ©ç”¨ã™ã‚‹ãŸã‚ã«å°å…¥ã™ã‚‹å¾Œå¤©çš„ãªç†ç”±ã«å¯¾ã—ã€<br>Bridgeãƒ‘ã‚¿ãƒ¼ãƒ³ã¯<code>è¨­è¨ˆã®æ®µéš</code>ã§åˆ†é›¢ã™ã‚‹ã¨ã„ã†å…ˆå¤©çš„ãªç†ç”±ã§å°å…¥ã•ã‚Œã‚‹ã®ãŒå¤§ããªé•ã„ã€‚</p><p>ã¾ãŸã€ã‚ˆãOOPã‚’å­¦ã³å§‹ã‚ã«ã‚„ã‚ŠãŒã¡ãªç¶™æ‰¿ã®å¤±æ•—(is-aé–¢ä¿‚ã‹ã‚‰å¤–ã‚ŒãŸç¶™æ‰¿)ã‚’èµ·ã“ã—ã«ãã„ã®ã§ç©æ¥µçš„ã«å°å…¥ã—ãŸã„ã€‚</p><h2 id="ä¾‹"><a href="#ä¾‹" class="headerlink" title="ä¾‹"></a>ä¾‹</h2><p>XMLã‹HTML5ã‹ã‚‰ã‚¿ã‚¤ãƒˆãƒ«ã‚’å–å¾—ã™ã‚‹ã€‚</p><h3 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h3><h4 id="é‡è¦ãªã¨ã“ã‚"><a href="#é‡è¦ãªã¨ã“ã‚" class="headerlink" title="é‡è¦ãªã¨ã“ã‚"></a>é‡è¦ãªã¨ã“ã‚</h4><p><code>ã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’ã™ã‚‹ã®ã‹</code>ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p><p><img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuShCAqajIajCJbK8I4nF3KWiAaujKgZcKb3GLYWkAShCIrT8Joq9oIp9ITNGvAhbuahEIImkLd3nzoLMQKH0Oaa6OSL8jjlKwEaXRC2GGJAGYyiXDIy5w0q0"></p><p><code>ä½•ã‚’è¡Œã†ã®ã‹</code>ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p><p><img src="https://www.plantuml.com/plantuml/svg/ZP312i8m38RlVOeSF6m8Um8FEtWL2nFcRSGQQw5s8qrFqtUtA4X5H6-1xmj_yhTHa2LTl38UOuIU3frXd8XXLW1B60OpXYYSZ5GQBMdacE5YodCt9ZPKFxoik631akoSUAfgTLFA1I4-eI4eLkVl_lE6zNRphxhNAEVVSf6-QfhYoNTqpUmL_a6ABDLIEERIxW00"></p><p>ã“ã‚Œã§ã€</p><ul><li>ä½•ã‚’è¡Œã†ã®ã‹(WebScraper)</li><li>ã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’ã™ã‚‹ã®ã‹(PageParser,DOMParser,XPathParser)</li></ul><p>ãŒåˆ†é›¢ã•ã‚ŒãŸçŠ¶æ…‹ã«ãªã‚‹ã€‚</p><h3 id="PHPã§æ›¸ã„ã¦ã¿ã‚‹"><a href="#PHPã§æ›¸ã„ã¦ã¿ã‚‹" class="headerlink" title="PHPã§æ›¸ã„ã¦ã¿ã‚‹"></a>PHPã§æ›¸ã„ã¦ã¿ã‚‹</h3><p>PageParser<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">PageParser</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getTitle</span><span class="params">()</span> : <span class="title">string</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>DOMParser<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DOMParser</span> <span class="keyword">implements</span> <span class="title">PageParser</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  prviate $document;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(DOMDocument $document)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     <span class="keyword">$this</span>-&gt;document = $document;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getTitle</span><span class="params">()</span> : <span class="title">string</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     $element = <span class="keyword">$this</span>-&gt;document-&gt;getElementsByTagName(<span class="string">'title'</span>)-&gt;item(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">return</span> $element-&gt;textContent ?? <span class="string">''</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>DOMParserãŒ<code>ã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’ã™ã‚‹ã®ã‹</code>ã‚’è¡¨ã—ã¦ã„ã‚‹ã€‚<br>ã“ã®ä¾‹ã§ã¯DOMDocumentã‚’å–å¾—ã—ã¦ã€titleã‚¿ã‚°ã®1ã¤ç›®ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—ã—ã¦ã„ã‚‹ã€‚</p><p>WebScraper<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WebScraper</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">protected</span> $pageParser;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(PageParser $pageParser)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="comment">// ã“ã®ã‚¯ãƒ©ã‚¹ã¯ã©ã®ã‚ˆã†ã«å‡¦ç†ã™ã‚‹ã®ã‹ã‚’å§”è­²ã—ã¦ã„ã‚‹</span></span><br><span class="line">    <span class="keyword">$this</span>-&gt;pageParser = $pageParser;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getTitle</span><span class="params">()</span> : <span class="title">string</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;pageSource-&gt;getTitle();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>WebScraperãŒ<code>ä½•ã‚’ã™ã‚‹ã®ã‹</code>ã®ã‚³ãƒ¼ãƒ‰ã€‚</p><p>WebScraperã¯ã€PageParserã‚¯ãƒ©ã‚¹ã‚’ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ä¿æŒã—ã¦ã€<br>å…·ä½“çš„ã«getTitleã§ã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’ã™ã‚‹ã®ã‹ã‚’PageParserã«å§”è­²ã—ã¦ã„ã‚‹ã€‚</p><p>ã“ã®ã‚ˆã†ã«WebScraperãŒ<code>ä½•ã‚’ã™ã‚‹ã®ã‹</code>ã¨<code>ã©ã®ã‚ˆã†ã«å‡¦ç†ã™ã‚‹ã®ã‹</code>ã®<code>æ©‹æ¸¡ã—</code>ã‚’ã—ã¦ã„ã‚‹ã€‚</p><p>ã“ã“ã§ã‚¿ã‚¤ãƒˆãƒ«ã®ä¸€éƒ¨åˆ†ã ã‘ã‚’å–å¾—ã™ã‚‹æ©Ÿèƒ½ãŒæ‹¡å¼µã•ã‚ŒãŸå ´åˆã§ã‚‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HyperWebScraper</span> <span class="keyword">extends</span> <span class="title">WebScraper</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getSubstringTitle</span><span class="params">(int $start, int $end)</span> : <span class="title">string</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> substr(<span class="keyword">$this</span>-&gt;pageSource-&gt;getTitle(), $start, $end);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã“ã®ã‚ˆã†ã«<code>ä½•ã‚’ã™ã‚‹ã®ã‹</code>ã¯å…·ä½“çš„ãªã‚¿ã‚¤ãƒˆãƒ«ã‚’å–å¾—ã™ã‚‹å‡¦ç†ã‚’çŸ¥ã‚‹ã“ã¨ãªãå®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚</p><p>Client Code<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$doc = <span class="keyword">new</span> DOMDocument();</span><br><span class="line">$doc-&gt;loadHTMLFile(<span class="string">'example.html'</span>);</span><br><span class="line"></span><br><span class="line">$pageSource = <span class="keyword">new</span> DOMParser($doc);</span><br><span class="line">$webScraper = <span class="keyword">new</span> WebScraper($pageSource);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $webScraper-&gt;getTitle();</span><br></pre></td></tr></table></figure></p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><ol><li><code>ä½•ã‚’è¡Œã†ã®ã‹</code>ã¨<code>ã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’ã™ã‚‹ã®ã‹</code>ã‚’åˆ†é›¢ã™ã‚‹ã€‚</li><li><code>ä½•ã‚’è¡Œã†ã®ã‹</code>ã‚’å®Ÿè£…ã™ã‚‹å ´åˆã¯ã€<code>ã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’ã™ã‚‹ã®ã‹</code>ã‚’æ„è­˜ã—ãªãã¦ã‚‚è‰¯ã„ã€‚</li><li>å§”è­²ã§å®Ÿè£…ã™ã‚‹ã€‚</li></ol><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://ja.wikipedia.org/wiki/Bridge_%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3" target="_blank" rel="noopener">WikiPedia</a><br><a href="http://d.hatena.ne.jp/shimooka/20141216/1418705115" target="_blank" rel="noopener">Do You PHP ã¯ã¦ãª</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ã€Œä½•ã‚’è¡Œã†ã®ã‹(æ©Ÿèƒ½)ã€ã¨ã€Œã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’ã™ã‚‹ã®ã‹(å®Ÿè£…)ã€ãã‚Œãã‚Œã®æ‹¡å¼µæ–¹æ³•ã‚’åˆ†ã‘ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚&lt;/p&gt;
&lt;p&gt;ã€Œä½•ã‚’è¡Œã†ã®ã‹(æ©Ÿèƒ½)ã€ã‚’å®Ÿè£…ã™ã‚‹å ´åˆã¯ã€ã€Œã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’ã™ã‚‹ã®ã‹(å®Ÿè£…)ã€ã‚’æ„è­˜ã—ãªãã¦ã‚‚è‰¯ã„ã®ãŒåˆ©ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;Bridgeãƒ‘ã‚¿ãƒ¼ãƒ³ã¯å…ˆæ—¥ã®&lt;a h
      
    
    </summary>
    
    
      <category term="PHP" scheme="https://ytetsuro.github.io/blog/tags/PHP/"/>
    
      <category term="Design Pattern" scheme="https://ytetsuro.github.io/blog/tags/Design-Pattern/"/>
    
      <category term="GoF" scheme="https://ytetsuro.github.io/blog/tags/GoF/"/>
    
  </entry>
  
  <entry>
    <title>Adapter</title>
    <link href="https://ytetsuro.github.io/blog/2018/05/18/Adapter/"/>
    <id>https://ytetsuro.github.io/blog/2018/05/18/Adapter/</id>
    <published>2018-05-18T05:53:20.000Z</published>
    <updated>2018-05-19T12:39:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>Interfaceã¨å®Ÿè£…ã®ä¸­é–“è£…ç½®çš„ãªãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚</p><p>æ—¢å­˜ã®ã‚¯ãƒ©ã‚¹ã«å¤‰æ›´ã‚’åŠ ãˆã‚‹ã“ã¨ãªãã€APIã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ãŒåˆ©ç‚¹ã€‚</p><h2 id="ä¾‹"><a href="#ä¾‹" class="headerlink" title="ä¾‹"></a>ä¾‹</h2><p>FWã¨ã‹ã«ä¾å­˜ã›ãšã«<code>users</code>ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã®ä¸€è¦§ã‚’ã¨ã£ã¦ãã‚‹</p><h3 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h3><h4 id="é‡è¦ãªã¨ã“ã‚"><a href="#é‡è¦ãªã¨ã“ã‚" class="headerlink" title="é‡è¦ãªã¨ã“ã‚"></a>é‡è¦ãªã¨ã“ã‚</h4><p>ã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’è¡Œã†ã‹ã®Interfaceã‚’å®šç¾©ã™ã‚‹ã€‚</p><p><img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuShCAqajIajCJbK8BKujSaijISv8BLAevb9Gq0QBHCSgfAUMQ6XorN9n9USa5XU3HQ4AYakAClFIGGhy4dDJ8Oh0qZPwUiZcSJcavgK0RGC0"></p><p>ã‚ã¨ã¯ã€Userãƒ¦ãƒ¼ã‚¶ãƒ‡ãƒ¼ã‚¿ã‚’å®Ÿéš›ã«å–å¾—ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å‘¼ã³å‡ºã™ã‚ˆã†ãªä¸­é–“è£…ç½®çš„ãªå½¹å‰²ã‚’æŒã¤<code>Adapter</code>ã‚’å®Ÿè£…ã™ã‚‹ã€‚<br>ä»¥ä¸‹ã¯ã€CodeIgniterã‚’åˆ©ç”¨ã—ãŸä¾‹</p><p><img src="https://www.plantuml.com/plantuml/svg/XP4n2y8m48Nt_8eC3ehGnRL3fIAuk3cfbBGvQo2DUhaCHVtljcae0T6kB-zzT_UIMH98hj5C6GAyY0humG9kWQeh87yopfTUEPvv3JHVi3TZbHRMUZKOBA4oTM_OYmPYqrgAEqs0yfk4NMqKuEgKxufDMJmSO5kKJcavPhzT2DPfyhImm8n4gQ7VuIy-10UkG1Gj7wIHuvCZnr-Q9abS3OjhIb_TOpYL_PpN4oPkPLDTfD6W38pilku3"></p><p>ã¾ãŸã€UserFetcharã¯CI_Db_query_builderã‚¯ãƒ©ã‚¹ãªã©FWå›ºæœ‰ã®ã‚¯ãƒ©ã‚¹ã«ã¯ä¸€åˆ‡ä¾å­˜ã—ã¦ã„ãªã„ã€‚<br>ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰ã‚’UserFetcherã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ä¾å­˜ã™ã‚Œã°ã€FWã«ä¾å­˜ã›ãšãƒ¦ãƒ¼ã‚¶æƒ…å ±ãŒå–å¾—ã§ãã‚‹ã€‚</p><p>ä¾‹ãˆã°ã€Laravelã«ä¾å­˜ã™ã‚‹å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«Adapterã¨FWå›ºæœ‰ã®ã‚¯ãƒ©ã‚¹ãŒå¤‰ã‚ã‚‹ã ã‘ã€‚</p><p><img src="https://www.plantuml.com/plantuml/svg/ZP0z3i8m38Ltdo8Z2Aadw50aG6A0ZOamcDIKI4vQ4cS2xau97S84w_FtVkGc2WP9Zi5weN11G-eGAMn8p9M2keDIYwmSJweZcStX2M0OOypg14G9rdTlO8-EIcZPuY0_WhRCoLcFGdg5WcUCfDVStn9vqRk-9PxioFpnvUgwgigjKEwk7-DnweO_yh_uXdmxlkG5"></p><p>ã¾ãŸã€ã“ã‚Œã‚‰ã¯å§”è­²ã‚’è¡Œã†ãƒ‘ã‚¿ãƒ¼ãƒ³ã ãŒã€ç¶™æ‰¿ã‚’åˆ©ç”¨ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚ã‚ã‚‹ã€‚</p><p><img src="https://www.plantuml.com/plantuml/svg/XP2n3i8m34HtVqL646g_e4DXo0OJdH23bPfIAMcGOuQAyk-afK8HL69zTxRlN0P1bhkpq7P2V453gWh4ciHSYTK3bDfCv7HM3Sbg3Ky0Op64YSw68DnspMWueAFKjAtn9dyM7P6zHjVQNgCHpttYLeO9XJHAZ1E7llZUB_CT-x34nrFlqnCiyZoj2sdrOeZY71z-8nP3bdtaahewFl45"></p><h3 id="PHPã§æ›¸ã„ã¦ã¿ã‚‹"><a href="#PHPã§æ›¸ã„ã¦ã¿ã‚‹" class="headerlink" title="PHPã§æ›¸ã„ã¦ã¿ã‚‹"></a>PHPã§æ›¸ã„ã¦ã¿ã‚‹</h3><p>UserFetcher(Interface)<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">UserFetcher</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span><span class="params">()</span> : <span class="title">array</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>User(Entity)<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $name;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(array $config = [])</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     <span class="keyword">if</span> (!<span class="keyword">empty</span>($config[<span class="string">'name'</span>])) &#123;</span><br><span class="line">       <span class="keyword">$this</span>-&gt;name = $config[<span class="string">'name'</span>]</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Adapter(CodeIgniterã®ãƒ‘ã‚¿ãƒ¼ãƒ³)<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Adapter</span> <span class="title">implement</span> <span class="title">UserFetcher</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> $db;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(CI_Db_query_builder $db)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;db = $db;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span><span class="params">(int $id)</span> : <span class="title">array</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    reutrn <span class="keyword">$this</span>-&gt;db-&gt;get(<span class="string">'users'</span>)-&gt;result(User::class);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Client Code<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NameRenderer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> $fetcher;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(UserFetcher $fetcher)</span> // &lt;- æŠ½è±¡ã«ä¾å­˜</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;fetcher = $fetcher;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">render</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     $users = <span class="keyword">$this</span>-&gt;fetcher-&gt;get();</span><br><span class="line">     <span class="keyword">foreach</span> ($users <span class="keyword">as</span> $user) &#123;</span><br><span class="line">        <span class="keyword">echo</span> $user-&gt;getName() . <span class="string">'ã•ã‚“ã€ã“ã‚“ã«ã¡ã¯'</span>;</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$fetcher = <span class="keyword">new</span> Adapter(get_instance()-&gt;db);</span><br><span class="line"><span class="comment">// NameRendererã¯ã€UserFetcherã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒåˆ©ç”¨ã§ãã‚Œã°è‰¯ã„</span></span><br><span class="line">$renderer = <span class="keyword">new</span> NameRenderer($fetcher);</span><br><span class="line">$renderer-&gt;render();</span><br></pre></td></tr></table></figure></p><p>ã“ã®æ§˜ã«ã€NameRendererãŒã»ã—ã„UserFetcher Interfaceã®<code>ä¸­é–“è£…ç½®</code>çš„ãªå½¹å‰²ã‚’è¡Œã†<br><code>Adapter</code>ã‚’å¤‰æ›´ã™ã‚Œã°ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰ãŒå®Ÿè£…å¯èƒ½ã«ãªã‚‹ã€‚<br>ã¾ãŸã€ã“ã‚Œã¯å§”è­²ã‚’è¡Œã†ãƒ‘ã‚¿ãƒ¼ãƒ³ã ãŒã€ç¶™æ‰¿ã‚’åˆ©ç”¨ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚ã‚ã‚‹ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TarouFamilyFactory</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">createFather</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> User([<span class="string">'name'</span> =&gt; <span class="string">'ä¸€éƒ'</span>]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">createMother</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> User([<span class="string">'name'</span> =&gt; <span class="string">'ãŸãˆ'</span>]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">createBrother</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> User([<span class="string">'name'</span> =&gt; <span class="string">'ãƒ­ãƒ¼ãƒ‰ãƒªã‚²ã‚¹'</span>]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">createTaro</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> User([<span class="string">'name'</span> =&gt; <span class="string">'å¤ªéƒ'</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Adapter(ç¶™æ‰¿ã‚’åˆ©ç”¨ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³)<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Adapter</span> <span class="keyword">extends</span> <span class="title">TarouFamilyFactory</span> <span class="title">implement</span> <span class="title">UserFetcher</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span><span class="params">()</span> : <span class="title">array</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">     <span class="comment">// è¦ªã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã€Interfaceã«åˆã‚ã›ãŸå½¢ã§æä¾›ã™ã‚‹</span></span><br><span class="line">     <span class="keyword">return</span> [</span><br><span class="line">       <span class="keyword">$this</span>-&gt;createFather(), <span class="comment">// è¦ªã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹</span></span><br><span class="line">       <span class="keyword">$this</span>-&gt;createMother(),</span><br><span class="line">       <span class="keyword">$this</span>-&gt;createBrother(),</span><br><span class="line">       <span class="keyword">$this</span>-&gt;createTaro(),</span><br><span class="line">     ];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><ol><li><code>Interface</code>ã¨<code>æ—¢å­˜ã‚¯ãƒ©ã‚¹</code>ã®æ©‹æ¸¡ã—ã‚’è¡Œã†</li><li>å§”è­²ã§ã‚‚ç¶™æ‰¿ã§ã‚‚å®Ÿè£…ã—ã¦ã‚‚è‰¯ã„</li></ol><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://ja.wikipedia.org/wiki/Adapter_%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3" target="_blank" rel="noopener">Wikipeida</a><br><a href="http://www.ie.u-ryukyu.ac.jp/~e085739/java.it.6.html" target="_blank" rel="noopener">ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³å…¥é–€ (Quick Tutorial)</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Interfaceã¨å®Ÿè£…ã®ä¸­é–“è£…ç½®çš„ãªãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚&lt;/p&gt;
&lt;p&gt;æ—¢å­˜ã®ã‚¯ãƒ©ã‚¹ã«å¤‰æ›´ã‚’åŠ ãˆã‚‹ã“ã¨ãªãã€APIã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ãŒåˆ©ç‚¹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¾‹&quot;&gt;&lt;a href=&quot;#ä¾‹&quot; class=&quot;headerlink&quot; title=&quot;ä¾‹&quot;&gt;&lt;/a&gt;ä¾‹&lt;
      
    
    </summary>
    
    
      <category term="PHP" scheme="https://ytetsuro.github.io/blog/tags/PHP/"/>
    
      <category term="Design Pattern" scheme="https://ytetsuro.github.io/blog/tags/Design-Pattern/"/>
    
      <category term="GoF" scheme="https://ytetsuro.github.io/blog/tags/GoF/"/>
    
  </entry>
  
  <entry>
    <title>Abstract Factory</title>
    <link href="https://ytetsuro.github.io/blog/2018/05/17/Abstract-Factory/"/>
    <id>https://ytetsuro.github.io/blog/2018/05/17/Abstract-Factory/</id>
    <published>2018-05-17T05:34:28.000Z</published>
    <updated>2018-05-17T09:58:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>æŠ½è±¡ã‚¯ãƒ©ã‚¹ã‚’ç”Ÿæˆã™ã‚‹æŠ½è±¡ã‚¯ãƒ©ã‚¹ã‚’åˆ©ç”¨ã—ãŸãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚<br>ã€ŒæŠ½è±¡çš„ãªå·¥å ´ã€ã¨è¨³ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚‹ã¨è¨€ã‚ã‚Œã¦ã„ã‚‹ãŒã€<strong>è¨€ã‚ã‚Œã¦ã„ã‚‹ä¾‹ã‚’ã‚ã¾ã‚Šè¦‹ãŸã“ã¨ãŒãªã„ã€‚</strong></p><p>åŒã˜ã‚ˆã†ãªæ§‹é€ ã®ã‚¯ãƒ©ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒè¤‡æ•°ã«åˆ†å²ã™ã‚‹å ´åˆã«æœ‰åŠ¹ã€‚<br>Factory Methodãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®é•ã„ã¯æ­£ç›´ã‚ˆãã‚ã‹ã£ã¦ã„ãªã„ã‘ã©ã€Factory Methodã‚’ã„ã£ã±ã„ä½œã£ãŸã‚‰Abstract Factoryãªã‚“ã˜ã‚ƒãªã„ã®ï¼Ÿãã‚‰ã„ã®èªè­˜ã€‚</p><h2 id="ä¾‹"><a href="#ä¾‹" class="headerlink" title="ä¾‹"></a>ä¾‹</h2><p><code>é‡£ã‚Šå…·</code>ãƒ¡ãƒ¼ã‚«ã®<code>ãƒªãƒ¼ãƒ«</code>ã¨<code>ãƒ­ãƒƒãƒ‰</code>ã‚’ç”Ÿæˆã™ã‚‹Factoryã‚¯ãƒ©ã‚¹ãŒã‚ã‚Šã€<br>ãã‚Œãã‚Œã®ã€ãƒ¡ãƒ¼ã‚«ã¯<code>simano</code>ã¨<code>Daiwa</code>ã‚’æº–å‚™ã™ã‚‹å ´åˆã€‚</p><h3 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h3><h4 id="é‡è¦ãªã¨ã“ã‚"><a href="#é‡è¦ãªã¨ã“ã‚" class="headerlink" title="é‡è¦ãªã¨ã“ã‚"></a>é‡è¦ãªã¨ã“ã‚</h4><p>Abstract Factoryã‚¯ãƒ©ã‚¹ã§æŠ½è±¡ã‚¯ãƒ©ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã‚ˆã†ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã™ã‚‹ã€‚<br>ã¾ãŸã€Abstract Factoryã‚¯ãƒ©ã‚¹è‡ªä½“ã‚‚æŠ½è±¡ã‚¯ãƒ©ã‚¹ã¨ã—ã¦å®Ÿè£…ã™ã‚‹ã€‚</p><p><img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuShCAqajIajCJbLmoopEoCnB3ydFpobMgEPIKD1M24fDpL58Joq1qHgQ4A7y50MmK7uAKAIM2ya0i6gGHeMIej8y35cWHh1aGMbE3aGIhC56Jm_5QYwGGWn1BeVKl1IWUm40"></p><p>ã‚ã¨ã¯ã€Factoryã‚¯ãƒ©ã‚¹ã®<code>ãƒ‘ã‚¿ãƒ¼ãƒ³</code>ã¨ã—ã¦å…·è±¡ã‚¯ãƒ©ã‚¹ã‚’ä½œã‚‹ã€‚<br>ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€Daiwaãƒ•ã‚¡ã‚¯ãƒˆãƒªã‚¯ãƒ©ã‚¹ã‚’ä½œã£ã¦ã„ã‚‹ã€‚</p><p><img src="https://www.plantuml.com/plantuml/svg/TL4z3i8W5DxVATweCUa9EdGm7i0ukf3oh2G81cWSgdUN7sk1waJo_GETTSouyIP1A4Vcmdh2Wx1NeOQJrjBY18WxF1997CY5SxDDaEOO8SqzyWBe9REsC9_tJ3pOAa9-8sQeZ0XmPaLdHbNmckVqVOo1dbwk49ChSyRwwPKr6jfdqsJj47G9cnkJyDFUUcPzNLZc_H50yS2nu9SgJQh8jAa6eIF5_IU-0G00"></p><p>ã“ã†ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€Factoryã‚¯ãƒ©ã‚¹ã‚’<code>ãƒ‘ã‚¿ãƒ¼ãƒ³</code>ã§åˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚<br>ä»Šå›ã®ä¾‹ã§ã¯ã€FishingTools(é‡£ã‚Šå…·)ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒDaiwaã¨simanoãŒå­˜åœ¨ã™ã‚‹ãŸã‚ã€</p><ul><li>Daiwaã¨simanoã‚’<code>å…·è±¡ã‚¯ãƒ©ã‚¹</code>ã¨ã—ã¦å®šç¾©</li><li>FishingTools(é‡£ã‚Šå…·)ã‚’<code>æŠ½è±¡ã‚¯ãƒ©ã‚¹</code>ã¨ã—ã¦å®šç¾©</li></ul><p>ã“ã‚Œã«ã‚ˆã‚Šã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰ã¯<code>æŠ½è±¡ã‚¯ãƒ©ã‚¹</code>ã¸ä¾å­˜ã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚</p><h4 id="å…¨ä½“åƒ"><a href="#å…¨ä½“åƒ" class="headerlink" title="å…¨ä½“åƒ"></a>å…¨ä½“åƒ</h4><p><img src="https://www.plantuml.com/plantuml/svg/fL9B3i8W4DtFAMQfCUa9N7HXF82wT4CALX8Afj2uKEyk7zCERTKOLoJlC_CUK5h7MjSr2gHseZsnIk1MshFKzS4OPV46Y2lS2Q6m5YwSYsM23CS86UwH1q2bcBMP-RYN3TFclnaR9g_iXn53ZwWEHdHjfoUiDqRoqYb5jmSRJKxSBu7X6JyxO8WzwoVqO8-1r_UYe1d6Q7H2I9-mFaoE9HdGCcjFpJmFa3xl940wJJHzeiy2oFvL33gtwekAz9eiIZSm1g4KcliV_WG0"></p><h3 id="PHPã§æ›¸ã„ã¦ã¿ã‚‹"><a href="#PHPã§æ›¸ã„ã¦ã¿ã‚‹" class="headerlink" title="PHPã§æ›¸ã„ã¦ã¿ã‚‹"></a>PHPã§æ›¸ã„ã¦ã¿ã‚‹</h3><p>FishingTools(Abstract Factory)<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">FishingTools</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getReel</span><span class="params">()</span> : <span class="title">Reel</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getRod</span><span class="params">()</span> : <span class="title">Rod</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Daiwa(Concrete Factory)<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">FishingTools</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Reel</span>\<span class="title">Daiwa</span> <span class="title">as</span> <span class="title">DaiwaReel</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Rod</span>\<span class="title">Daiwa</span> <span class="title">as</span> <span class="title">DaiwaRod</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Daiwa</span> <span class="keyword">implements</span> <span class="title">FishingTools</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getReel</span><span class="params">()</span> : <span class="title">Reel</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> DaiwaReel(); <span class="comment">// å…·è±¡ã‚¯ãƒ©ã‚¹ã«ä¾å­˜</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getRod</span><span class="params">()</span> : <span class="title">Rod</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> DaiwaRod(); <span class="comment">// å…·è±¡ã‚¯ãƒ©ã‚¹ã«ä¾å­˜</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Client Code<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fisher</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> $reel;</span><br><span class="line">  <span class="keyword">private</span> $rod;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(FishingTools $tools)</span> // &lt;- æŠ½è±¡ã«ä¾å­˜</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;reel = $tools-&gt;getReel();</span><br><span class="line">    <span class="keyword">$this</span>-&gt;rod  = $tools-&gt;getRod();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">playFishing</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">$this</span>-&gt;reel-&gt;trun()) &#123;</span><br><span class="line">      <span class="comment">// @<span class="doctag">todo:</span> é‡£ã‚ŒãŸã‹åˆ¤å®šã‚’æ›¸ã</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$fishingTools = <span class="keyword">new</span> FishingTools\Daiwa();</span><br><span class="line">$fisher = <span class="keyword">new</span> Fisher($fishingTools);</span><br><span class="line">$fisher-&gt;playFishing();</span><br></pre></td></tr></table></figure></p><p>ã“ã®ã‚ˆã†ã«Client Codeã‚’æŠ½è±¡ã‚¯ãƒ©ã‚¹ã«ä¾å­˜ã•ã›ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€<br>$fishingToolsã¯Daiwaã§ã‚‚simanoã§ã‚‚é‡£ã‚Šå…·ã‚’ç”Ÿæˆã§ãã‚Œã°ãªã‚“ã§ã‚‚ã„ã„çŠ¶æ…‹ãŒã§ãã‚‹ã€‚</p><p>ã“ã®ã€æŠ½è±¡ã‚¯ãƒ©ã‚¹ã«ä¾å­˜ã§ãã‚‹ã¨ã“ã‚ã«OOPçš„ãªæ—¨å‘³ãŒã‚ã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã†ã€‚</p><h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><ol><li><code>æŠ½è±¡ã‚¯ãƒ©ã‚¹(Abstract Class)</code>ã‚’ç”Ÿæˆã™ã‚‹<code>æŠ½è±¡ã‚¯ãƒ©ã‚¹(Abstract Factory)</code>ã‚’ä½œã‚‹</li><li>å®Ÿéš›ã«ã©ã®<code>å…·è±¡ã‚¯ãƒ©ã‚¹(Concrete Class)</code>ã‚’ç”Ÿæˆã™ã‚‹ã®ã‹ã¯<code>å…·è±¡ã‚¯ãƒ©ã‚¹(Concrete Factory)</code>ã«å®Ÿè£…ã™ã‚‹</li></ol><h2 id="æ‰€æ„Ÿ"><a href="#æ‰€æ„Ÿ" class="headerlink" title="æ‰€æ„Ÿ"></a>æ‰€æ„Ÿ</h2><p>å‹•æ©Ÿã¨ã—ã¦ã¯ã€ä¼šç¤¾ã§ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦ã©ã‚Œã»ã©ç†è§£ãŒã‚ã‚‹ã®ã‹ã®ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆãŒã‚ã£ãŸã€‚<br>ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å¾©ç¿’ã¨å­¦ç¿’ã®ãŸã‚ã€ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã§ã§ã¦ããŸãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’1æ—¥ãšã¤PHPã§æ›¸ã„ã¦ã¿ã‚ˆã†ã¨æ€ã†ã€‚</p><p>39ç¨®é¡ã‚ã£ãŸã®ã§6/24ãã‚‰ã„ã«ã¯39ç¨®é¡å…¨ã¦æ›¸ã‘ã‚‹ã‹ã¨æ€ã†ã€‚</p><p>ã¾ãŸã€ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦ã¯è‡ªä¿¡ãŒã‚ã¾ã‚Šãªã„ã®ã§</p><ul><li>ã“ã‚Œã§ä¼ã‚ã‚‹ã®ã‹</li><li>ãã‚‚ãã‚‚èªè­˜ãŒæ­£ã—ã„ã®ã‹</li></ul><p>ãŒä¸å®‰</p><p><a href="https://ja.wikipedia.org/wiki/Abstract_Factory_%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3" target="_blank" rel="noopener">Wiki Pedia</a><br><a href="http://www.ie.u-ryukyu.ac.jp/~e085739/java.it.2.html" target="_blank" rel="noopener">å‚è€ƒ</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æŠ½è±¡ã‚¯ãƒ©ã‚¹ã‚’ç”Ÿæˆã™ã‚‹æŠ½è±¡ã‚¯ãƒ©ã‚¹ã‚’åˆ©ç”¨ã—ãŸãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚&lt;br&gt;ã€ŒæŠ½è±¡çš„ãªå·¥å ´ã€ã¨è¨³ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚‹ã¨è¨€ã‚ã‚Œã¦ã„ã‚‹ãŒã€&lt;strong&gt;è¨€ã‚ã‚Œã¦ã„ã‚‹ä¾‹ã‚’ã‚ã¾ã‚Šè¦‹ãŸã“ã¨ãŒãªã„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åŒã˜ã‚ˆã†ãªæ§‹é€ ã®ã‚¯ãƒ©ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒè¤‡æ•°ã«åˆ†å²ã™ã‚‹å ´åˆã«æœ‰åŠ¹
      
    
    </summary>
    
    
      <category term="PHP" scheme="https://ytetsuro.github.io/blog/tags/PHP/"/>
    
      <category term="Design Pattern" scheme="https://ytetsuro.github.io/blog/tags/Design-Pattern/"/>
    
      <category term="GoF" scheme="https://ytetsuro.github.io/blog/tags/GoF/"/>
    
  </entry>
  
  <entry>
    <title>Hexoã‚’ä½¿ã£ã¦GithubPagesã«Blogã‚’æ§‹ç¯‰ã—ã¦ã¿ãŸ</title>
    <link href="https://ytetsuro.github.io/blog/2018/05/16/Hexo%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6Blog%E3%82%92%E6%A7%8B%E7%AF%89%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F/"/>
    <id>https://ytetsuro.github.io/blog/2018/05/16/Hexoã‚’ä½¿ã£ã¦Blogã‚’æ§‹ç¯‰ã—ã¦ã¿ãŸ/</id>
    <published>2018-05-16T06:57:45.000Z</published>
    <updated>2018-05-16T10:39:58.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä½¿ç”¨ã—ãŸãƒ„ãƒ¼ãƒ«ãªã©"><a href="#ä½¿ç”¨ã—ãŸãƒ„ãƒ¼ãƒ«ãªã©" class="headerlink" title="ä½¿ç”¨ã—ãŸãƒ„ãƒ¼ãƒ«ãªã©"></a>ä½¿ç”¨ã—ãŸãƒ„ãƒ¼ãƒ«ãªã©</h2><p><a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a></p><p>Node.jsè£½ã®Markdownã‹ã‚‰é™çš„ãªHTMLã‚„CSSã‚’å‡ºåŠ›ã—ã¦ãã‚Œã‚‹ãƒ–ãƒ­ã‚°ãƒ„ãƒ¼ãƒ«</p><p><a href="https://pages.github.com/" target="_blank" rel="noopener">GithubPages</a></p><p>ãƒªãƒã‚¸ãƒˆãƒªã®ç‰¹å®šã®ãƒ–ãƒ©ãƒ³ãƒã‚’é™çš„ãªãƒšãƒ¼ã‚¸ã¨ã—ã¦è¡¨ç¤ºã—ã¦ãã‚Œã‚‹Githubã®æ©Ÿèƒ½</p><h2 id="å°å…¥æ–¹æ³•"><a href="#å°å…¥æ–¹æ³•" class="headerlink" title="å°å…¥æ–¹æ³•"></a>å°å…¥æ–¹æ³•</h2><h3 id="GitHubPagesä½œæˆæ‰‹é †"><a href="#GitHubPagesä½œæˆæ‰‹é †" class="headerlink" title="GitHubPagesä½œæˆæ‰‹é †"></a>GitHubPagesä½œæˆæ‰‹é †</h3><ol><li>GitHubã«ã¦ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆ</li><li>ä½œæˆã—ãŸGitHubãƒªãƒã‚¸ãƒˆãƒªã‚ˆã‚Šã€ŒSettingã€ -&gt; [Github Pages] -&gt; [Source] -&gt; [master Branch]ã‚’é¸æŠã—ã¦Saveã‚’æŠ¼ä¸‹</li></ol><p>ã“ã‚Œã§ã€GitHub Pagesã¯ä½œæˆå®Œäº†ğŸ‘</p><h3 id="Hexoã®å°å…¥"><a href="#Hexoã®å°å…¥" class="headerlink" title="Hexoã®å°å…¥"></a>Hexoã®å°å…¥</h3><p>Hexoã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«å¾“ã£ã¦ä»¥ä¸‹ã‚’å®Ÿè¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-cli -g</span><br><span class="line">$ hexo init blog</span><br><span class="line">$ <span class="built_in">cd</span> blog</span><br></pre></td></tr></table></figure><p>Blogã®è¨­å®šã‚’å¤‰æ›´</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim _config.yml</span><br></pre></td></tr></table></figure><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"> ## Source: https://github.com/hexojs/hexo/</span><br><span class="line"> </span><br><span class="line"> # Site</span><br><span class="line"><span class="deletion">-title: Hexo</span></span><br><span class="line"><span class="deletion">-subtitle:</span></span><br><span class="line"><span class="deletion">-description:</span></span><br><span class="line"><span class="deletion">-keywords:</span></span><br><span class="line"><span class="deletion">-author: John Doe</span></span><br><span class="line"><span class="deletion">-language:</span></span><br><span class="line"><span class="deletion">-timezone:</span></span><br><span class="line"><span class="addition">+title: &#123;&#123;ãƒ–ãƒ­ã‚°ã®ã‚¿ã‚¤ãƒˆãƒ«&#125;&#125;</span></span><br><span class="line"><span class="addition">+subtitle: &#123;&#123;ãƒ–ãƒ­ã‚°ã®ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«&#125;&#125;</span></span><br><span class="line"><span class="addition">+description: &#123;&#123;ãƒ–ãƒ­ã‚°ã®è©³ç´°ãªèª¬æ˜ã‚’æ›¸ã&#125;&#125;</span></span><br><span class="line"><span class="addition">+keywords: &#123;&#123;å¤šåˆ†keywordã‚’æ›¸ã@todo: themeã«ã‚ˆã£ã¦ç•°ãªã‚Šãã†ã ã‘ã©ã€metaã®keyworkï¼Ÿ&#125;&#125;</span></span><br><span class="line"><span class="addition">+author: &#123;&#123;è‡ªåˆ†ã®åå‰&#125;&#125;</span></span><br><span class="line"><span class="addition">+language: ja</span></span><br><span class="line"><span class="addition">+timezone: Asia/Tokyo</span></span><br><span class="line"> </span><br><span class="line"> # URL</span><br><span class="line"> ## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span><br><span class="line"><span class="deletion">-url: http://yoursite.com</span></span><br><span class="line"><span class="deletion">-root: /</span></span><br><span class="line"><span class="addition">+url: https://&#123;&#123;Githubã®ãƒ¦ãƒ¼ã‚¶å&#125;&#125;.github.io/&#123;&#123;Github Pagesã¨ã—ã¦ä½œã£ãŸãƒªãƒã‚¸ãƒˆãƒªå&#125;&#125;</span></span><br><span class="line"><span class="addition">+root: /&#123;&#123;Github Pagesã¨ã—ã¦ä½œã£ãŸãƒªãƒã‚¸ãƒˆãƒªå&#125;&#125;</span></span><br><span class="line"> permalink: :year/:month/:day/:title/</span><br><span class="line"> permalink_defaults:</span><br><span class="line"> </span><br><span class="line"><span class="meta">@@ -73,9 +73,11 @@</span></span><br><span class="line"> # Extensions</span><br><span class="line"> ## Plugins: https://hexo.io/plugins/</span><br><span class="line"> ## Themes: https://hexo.io/themes/</span><br><span class="line"> theme: landscape</span><br><span class="line"> </span><br><span class="line"> # Deployment</span><br><span class="line"> ## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line"> deploy:</span><br><span class="line"><span class="deletion">-  type:</span></span><br><span class="line"><span class="addition">+  type: git</span></span><br><span class="line"><span class="addition">+  repo: &#123;&#123;Github Pagesã§ä½œã£ãŸãƒªãƒã‚¸ãƒˆãƒª&#125;&#125;</span></span><br><span class="line"><span class="addition">+  branch: master</span></span><br></pre></td></tr></table></figure><h4 id="Hexoã«themeã‚’æŒ‡å®šã™ã‚‹"><a href="#Hexoã«themeã‚’æŒ‡å®šã™ã‚‹" class="headerlink" title="Hexoã«themeã‚’æŒ‡å®šã™ã‚‹"></a>Hexoã«themeã‚’æŒ‡å®šã™ã‚‹</h4><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ†ãƒ¼ãƒã ã¨Hello Worldã®ãƒšãƒ¼ã‚¸è¡¨ç¤ºã«1.44secã‹ã‹ã£ã¦ã„ãŸã®ã§ã€<br>ã‚‚ã£ã¨è»½é‡ã§500msä»¥å†…ã§Hello Worldãã‚‰ã„ã®å†…å®¹ã‚’è¿”ã—ã¦ãã‚Œã‚‹themeã‚’æ¢ã“ã¨ã«ã—ãŸã€‚<br>(hexo serverã«ã¦è¨ˆæ¸¬)</p><p>Hexoã«ã¯<a href="https://hexo.io/themes" target="_blank" rel="noopener">Theme ä¸€è¦§</a>ãƒšãƒ¼ã‚¸ãŒã‚ã£ãŸã®ã§ã€ã“ã“ã‹ã‚‰ã„ã„æ„Ÿã˜ã®themeã‚’æ¢ã™ã€‚</p><p><a href="https://github.com/tiaanduplessis/hexo-theme-brewski" target="_blank" rel="noopener">brewski</a>ãŒã™ã”ãè»½é‡ã ã£ãŸã®ã§æ‰‹å…ƒã®Hexoã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚<br>(åå‰ã‹ã‚‰ã—ã¦brew Licenceã‹ã¨æ€ã£ãŸãŒã€MITã ã£ãŸã€‚)</p><p>ã“ã®themeã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå……å®Ÿã—ã¦ã„ãŸã®ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé€šã‚Šã«ä¸‹è¨˜ã‚’å®Ÿè¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/tiaanduplessis/hexo-theme-brewski.git themes/brewski</span><br><span class="line">$ npm install --save hexo-renderer-pug hexo-generator-feed hexo-generator-sitemap</span><br><span class="line">$ vim theme/_config.yml</span><br></pre></td></tr></table></figure><p><em>menuã¯ç©ºã®å€¤ã‚’ä½œã‚‹ã¨<a href="https://github.com/tiaanduplessis/hexo-theme-brewski/issues/1" target="_blank" rel="noopener">ã“ã‚“ãªã‚¨ãƒ©ãƒ¼ãŒã§ã¦buildã§ããªã„</a>ã®ã§å¿…ãšåŸ‹ã‚ã‚‹ã“ã¨ã€‚</em></p><p>ä¸è¦ã§ã‚ã‚Œã°é …ç›®è‡ªä½“æ¶ˆã™ã€‚</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@@ -5,7 +5,7 @@</span></span><br><span class="line">   Home: /</span><br><span class="line">   About: /about</span><br><span class="line">   Archives: /archives</span><br><span class="line"><span class="deletion">-  GitHub: </span></span><br><span class="line"><span class="addition">+  GitHub: &#123;&#123;GitHubã®URLãªã©Headerã«ä»˜ããƒªãƒ³ã‚¯&#125;&#125;</span></span><br><span class="line">   RSS: /atom.xml</span><br><span class="line"> </span><br><span class="line"> favicon: /favicon.svg</span><br><span class="line"><span class="meta">@@ -15,10 +15,10 @@</span></span><br><span class="line"><span class="deletion">-disqus: </span></span><br><span class="line"><span class="addition">+disqus: &#123;&#123;Disqusã®shortname(å¿…è¦ã§ã‚ã‚Œã°)&#125;&#125;</span></span><br><span class="line"> </span><br><span class="line"> # Analytics</span><br><span class="line"><span class="deletion">-google_analytics:</span></span><br><span class="line"><span class="addition">+google_analytics: UA-XXXXXXXXX-1</span></span><br><span class="line"> </span><br><span class="line"> # Copyright Infomation</span><br><span class="line"> copyright:</span><br><span class="line"><span class="deletion">-  since:</span></span><br><span class="line"><span class="deletion">-  name: </span></span><br><span class="line"><span class="deletion">-  url:  </span></span><br><span class="line"><span class="addition">+  since: 2018</span></span><br><span class="line"><span class="addition">+  name: &#123;&#123;åå‰&#125;&#125;</span></span><br><span class="line"><span class="addition">+  url: &#123;&#123;ãƒ–ãƒ­ã‚°ã®URL&#125;&#125;</span></span><br></pre></td></tr></table></figure><h4 id="ãƒ–ãƒ­ã‚°ã®ç¢ºèª"><a href="#ãƒ–ãƒ­ã‚°ã®ç¢ºèª" class="headerlink" title="ãƒ–ãƒ­ã‚°ã®ç¢ºèª"></a>ãƒ–ãƒ­ã‚°ã®ç¢ºèª</h4><p>ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦è¡¨ç¤ºã•ã‚ŒãŸURLã¸ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã ã‘</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo server</span></span><br></pre></td></tr></table></figure><h4 id="ãƒ–ãƒ­ã‚°ã®ãƒ‡ãƒ—ãƒ­ã‚¤"><a href="#ãƒ–ãƒ­ã‚°ã®ãƒ‡ãƒ—ãƒ­ã‚¤" class="headerlink" title="ãƒ–ãƒ­ã‚°ã®ãƒ‡ãƒ—ãƒ­ã‚¤"></a>ãƒ–ãƒ­ã‚°ã®ãƒ‡ãƒ—ãƒ­ã‚¤</h4><p>gitã‚’åˆ©ç”¨ã—ãŸdeployç”¨ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install hexo-deployer-git --save --no-optional</span></span><br></pre></td></tr></table></figure><p>ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤<br>(gã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã‚‹ã¨é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’genereateã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo deploy -g</span></span><br></pre></td></tr></table></figure><h2 id="æ„Ÿæƒ³"><a href="#æ„Ÿæƒ³" class="headerlink" title="æ„Ÿæƒ³"></a>æ„Ÿæƒ³</h2><p>ãƒ–ãƒ­ã‚°ç¨‹åº¦ã®å†…å®¹ã§ã‚ã‚Œã°ã€Github Pagesã§ååˆ†äº‹è¶³ã‚Šã‚‹ã¨æ€ã„ã‚„ã£ã¦ã¿ãŸã‚‰HexoãŒã™ã”ãç°¡å˜ã§é©šã„ãŸã€‚<br>ã¾ãŸã€vimã§è¨˜äº‹ãŒæ›¸ã‘ã‚‹ã®ã¯ã™ã”ãè‰¯ã„ã€‚</p><p><a href="https://disqus.com/" target="_blank" rel="noopener">Disqus</a>ã«ã¤ã„ã¦ã¯ç°¡å˜ã™ãã¦è¨˜äº‹ã§ã¯æ›¸ã„ã¦ã„ãªã„ã‘ã‚Œã©ã‚‚ã€ä¸‹è¨˜ã®è¨˜äº‹ã‚’å‚è€ƒã«ã™ã‚‹ã¨ã™ãã«å°å…¥å¯èƒ½ã§ã—ãŸã®ã§å‚è€ƒã¾ã§ã«</p><p><a href="https://azriton.github.io/2017/02/26/Hexo%E3%81%AB%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88%E6%AC%84%E3%81%AEDisqus%E3%82%92%E8%A8%AD%E7%BD%AE/" target="_blank" rel="noopener">Hexo ã« ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ ã® Disqus ã‚’ è¨­ç½®</a></p><h3 id="èª²é¡Œã€æ°—ã«ãªã‚‹ã“ã¨"><a href="#èª²é¡Œã€æ°—ã«ãªã‚‹ã“ã¨" class="headerlink" title="èª²é¡Œã€æ°—ã«ãªã‚‹ã“ã¨"></a>èª²é¡Œã€æ°—ã«ãªã‚‹ã“ã¨</h3><ul><li>å…ƒã®markdownã‚’<code>hexo deploy</code>ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã§ããªã„ã®ã‹</li><li>Disqusã§ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ã‚’å…¥ã‚ŒãŸãŒã€barbaã®pjaxãªã‚‹æ©Ÿèƒ½ã§è¨˜äº‹è©³ç´°ã«è¡Œã£ãŸæ™‚ã«æ›´æ–°ã—ãªã„ã¨DisqusãŒèª­ã¿è¾¼ã¾ã‚Œãªã„(ä¿®æ­£å¾Œthemeã¸è¦PR)</li><li>æ³¨é‡ˆã¿ãŸã„ãªæ©Ÿèƒ½ãŒæ¬²ã—ã„(ã‚ã‚‹ã‹ç¢ºèªã—ã¦ãªã‘ã‚Œã°ä½œã‚‹)</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ä½¿ç”¨ã—ãŸãƒ„ãƒ¼ãƒ«ãªã©&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨ã—ãŸãƒ„ãƒ¼ãƒ«ãªã©&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨ã—ãŸãƒ„ãƒ¼ãƒ«ãªã©&quot;&gt;&lt;/a&gt;ä½¿ç”¨ã—ãŸãƒ„ãƒ¼ãƒ«ãªã©&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot;
      
    
    </summary>
    
    
      <category term="Node.js" scheme="https://ytetsuro.github.io/blog/tags/Node-js/"/>
    
      <category term="Hexo" scheme="https://ytetsuro.github.io/blog/tags/Hexo/"/>
    
      <category term="Github Pages" scheme="https://ytetsuro.github.io/blog/tags/Github-Pages/"/>
    
  </entry>
  
</feed>
